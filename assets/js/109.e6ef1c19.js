(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{428:function(e,t,o){"use strict";o.r(t);var a=o(4),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("blockquote",[t("p",[t("code",[e._v("objection")]),e._v(" is a runtime mobile exploration toolkit, powered by Frida, built to help you assess the security posture of your mobile applications, without needing a jailbreak. 帮助链接: "),t("a",{attrs:{href:"https://github.com/sensepost/objection/wiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("objection-wiki"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"objection-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#objection-cli"}},[e._v("#")]),e._v(" objection cli")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("objection --help")]),e._v(": 帮助命令")]),e._v(" "),t("li",[t("code",[e._v("help android hooking watch class_method")]),e._v(": 命令中使用, 监听 class")]),e._v(" "),t("li",[t("code",[e._v("objection -S <device serial> -g <Gadget/Process> explore -P ~/.objection/plugins")]),e._v(" "),t("code",[e._v("-P")]),e._v(" 指定了插件的路径。使用 explore 模式会导致应用重启")]),e._v(" "),t("li",[t("code",[e._v("env")])]),e._v(" "),t("li",[t("code",[e._v("evaluate <script_path>")])]),e._v(" "),t("li",[t("code",[e._v("reconnect")])]),e._v(" "),t("li",[e._v("jobs: 任务命令\n"),t("ul",[t("li",[t("code",[e._v("jobs list")]),e._v(": list current jobs")]),e._v(" "),t("li",[t("code",[e._v("jobs kill <Job_ID>")])])])])]),e._v(" "),t("h3",{attrs:{id:"memory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#memory"}},[e._v("#")]),e._v(" memory")]),e._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://www.anquanke.com/post/id/197657#h3-2",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.anquanke.com/post/id/197657#h3-2"),t("OutboundLink")],1)])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("memory list modules")])]),e._v(" "),t("li",[t("code",[e._v("memory list exports libssl.so --json /root/libart.json")])])]),e._v(" "),t("h3",{attrs:{id:"android"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android"}},[e._v("#")]),e._v(" android")]),e._v(" "),t("h4",{attrs:{id:"hooking"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hooking"}},[e._v("#")]),e._v(" hooking")]),e._v(" "),t("ul",[t("li",[e._v("list\n"),t("ul",[t("li",[t("code",[e._v("android hooking list classes")])]),e._v(" "),t("li",[t("code",[e._v("android hooking list class_loaders")])]),e._v(" "),t("li",[t("code",[e._v("android hooking list class_methods")])]),e._v(" "),t("li",[t("code",[e._v("android hooking list activity")])])])]),e._v(" "),t("li",[e._v("search\n"),t("ul",[t("li",[t("code",[e._v("android hooking search methods")])]),e._v(" "),t("li",[t("code",[e._v("android hooking search classes")])])])]),e._v(" "),t("li",[t("code",[e._v("android hooking generate simple")])]),e._v(" "),t("li",[e._v("watch\n"),t("ul",[t("li",[t("code",[e._v("android hooking watch class")])]),e._v(" "),t("li",[t("code",[e._v("android hooking watch class_method")]),e._v(": 查看哪些个方法的参数、返回值和调用栈, 参数:  --dump-args --dump-return --dump-backtrace")])])]),e._v(" "),t("li",[e._v("set")])]),e._v(" "),t("h4",{attrs:{id:"heap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#heap"}},[e._v("#")]),e._v(" heap")]),e._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://www.anquanke.com/post/id/197657#h3-3",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.anquanke.com/post/id/197657#h3-3"),t("OutboundLink")],1)])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("android heap search instances com.android.settings.DisplaySettings")])]),e._v(" "),t("li",[t("code",[e._v("android heap execute 0x2526 getPreferenceScreenResId")])]),e._v(" "),t("li",[t("code",[e._v("android heap evaluate 0x2526")]),e._v(" 进入迷你编辑器")])]),e._v(" "),t("h3",{attrs:{id:"file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file"}},[e._v("#")]),e._v(" file")]),e._v(" "),t("h3",{attrs:{id:"import"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[e._v("#")]),e._v(" import")]),e._v(" "),t("blockquote",[t("p",[e._v("Import fridascript from a full path and run it")])]),e._v(" "),t("h3",{attrs:{id:"plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[e._v("#")]),e._v(" plugin")]),e._v(" "),t("blockquote",[t("p",[e._v("Work with plugins. 下面介绍一些常用的 objection 的 plugin")])]),e._v(" "),t("h4",{attrs:{id:"wallbreaker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wallbreaker"}},[e._v("#")]),e._v(" Wallbreaker")]),e._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://github.com/hluwa/Wallbreaker",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/hluwa/Wallbreaker"),t("OutboundLink")],1),e._v(" 入门:  "),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/qpj3ezUdm-X6ZwcWcibeAw",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用 Wallbreaker 快速分析 Java 类/对象结构"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("一、使用")]),e._v(" "),t("ul",[t("li",[e._v("安装 "),t("code",[e._v("objection: pip3 install objection")])]),e._v(" "),t("li",[e._v("下载 wallbreaker 到自己的插件目录: "),t("code",[e._v("git clone https://github.com/hluwa/Wallbreaker ~/.objection/plugins/Wallbreaker")])]),e._v(" "),t("li",[e._v("启动 frida-server, 使用 -P 参数 "),t("RText",{attrs:{text:"带着插件启动 objection",color:"green"}}),e._v(": "),t("code",[e._v("objection -g com.app.name explore -P ~/.objection/plugins")])],1)]),e._v(" "),t("p",[e._v("二、使用")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("plugin wallbreaker classsearch <pattern>")]),e._v(" 搜索类: 根据给的 pattern 对所有类名进行匹配, 列出匹配到的所有类名。")]),e._v(" "),t("li",[t("code",[e._v("plugin wallbreaker objectsearch <classname>")]),e._v(" 搜索对象: 根据类名搜索内存中已经被创建的实例, 列出 handle 和 toString() 的结果。")]),e._v(" "),t("li",[t("code",[e._v("plugin wallbreaker classdump <classname> [--fullname]")]),e._v(" ClassDump: 输出类的结构,  若加了 --fullname 参数, 打印的数据中类名会带着完整的包名。")]),e._v(" "),t("li",[t("code",[e._v("plugin wallbreaker objectdump <handle> [--fullname]")]),e._v(" ObjectDump: 在 ClassDump 的基础上, 输出指定对象中的每个字段的数据。")])]),e._v(" "),t("h4",{attrs:{id:"frida-dexdump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frida-dexdump"}},[e._v("#")]),e._v(" FRIDA-DEXDump")]),e._v(" "),t("blockquote",[t("p",[e._v("frida-dexdump is a frida tool to find and dump dex in memory to support security engineers in analyzing malware.\n更多内容点击查看: "),t("a",{attrs:{href:"https://github.com/hluwa/FRIDA-DEXDump",target:"_blank",rel:"noopener noreferrer"}},[e._v("FRIDA-DEXDump"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("使用命令 "),t("code",[e._v("frida-dexdump -D <device_id> -f <package>")]),e._v(" 开始 dump dex")]),e._v(" "),t("h2",{attrs:{id:"other"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#other"}},[e._v("#")]),e._v(" other")]),e._v(" "),t("h3",{attrs:{id:"本地源码运行-objection-程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地源码运行-objection-程序"}},[e._v("#")]),e._v(" 本地源码运行 objection 程序")]),e._v(" "),t("ol",[t("li",[e._v("从"),t("a",{attrs:{href:"https://github.com/sensepost/objection",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网"),t("OutboundLink")],1),e._v("下载 objection 源码。 这里需要注意找到 tag 进行 clone, 可以选择与本地命令一样的版本 tag 进行 clone。\n这里使用 1.11.0 这个版本:  "),t("code",[e._v("git clone -b 1.11.0 https://github.com/sensepost/objection.git")]),e._v(". "),t("a",{attrs:{href:"https://github.com/jacky1234/objection",target:"_blank",rel:"noopener noreferrer"}},[e._v("forked"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("cd 到 objection 目录.")]),e._v(" "),t("li",[e._v("查看源码的 setup.py 文件, 这是一个打包脚本。相关内容之前有介绍, "),t("RouterLink",{attrs:{to:"/pages/4595e1/"}},[e._v("link")])],1),e._v(" "),t("li",[e._v("安装需要的依赖 "),t("code",[e._v("pip install -r requirements-dev.txt")])]),e._v(" "),t("li",[e._v("安装 agent 依赖。 这一步参考链接 "),t("a",{attrs:{href:"https://github.com/sensepost/objection/wiki/Agent-Development-Environment#agent-dependencies",target:"_blank",rel:"noopener noreferrer"}},[e._v("agent dependencies"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("运行:  "),t("code",[e._v("python -m objection.console.cli {参数}")])])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jacky1234/picArchieve@master/uPic/20240219_174807_ElYWB7.jpg",alt:""}}),e._v("\n结果如上, 证明配置正常了")])])}),[],!1,null,null,null);t.default=r.exports}}]);