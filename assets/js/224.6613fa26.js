(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{540:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("code",[t._v("pyproject.toml")]),t._v(" 是一个用于定义 Python 项目的配置文件，包含构建系统、依赖项管理、项目元数据等信息。它最初是由 "),s("code",[t._v("PEP 518")]),t._v(" 引入的，目的是简化项目的构建流程并提供标准化的配置方式。")]),t._v(" "),s("h2",{attrs:{id:"pyproject-toml-的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pyproject-toml-的作用"}},[t._v("#")]),t._v(" pyproject.toml 的作用")]),t._v(" "),s("p",[t._v("主要用于以下几个方面：")]),t._v(" "),s("ol",[s("li",[t._v("定义构建系统：")])]),t._v(" "),s("p",[t._v("它允许你指定项目的构建系统，如 setuptools、poetry、flit 等工具。通过 pyproject.toml，你可以清楚地定义项目需要使用的构建工具和相关依赖。")]),t._v(" "),s("div",{staticClass:"language-toml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("build-system")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("requires")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setuptools>=42"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wheel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("build-backend")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setuptools.build_meta"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("其中：")]),t._v(" "),s("ul",[s("li",[t._v("requires：指定构建项目所需的依赖包。")]),t._v(" "),s("li",[t._v("build-backend：指定构建项目时要使用的工具。")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("依赖管理：")])]),t._v(" "),s("p",[t._v("一些现代的依赖管理工具(如 poetry)也使用 "),s("code",[t._v("pyproject.toml")]),t._v(" 来管理项目依赖和虚拟环境。相比于 requirements.txt，使用 pyproject.toml 更加灵活、结构化。")]),t._v(" "),s("p",[t._v("例如，使用 poetry 时的依赖管理：")]),t._v(" "),s("div",{staticClass:"language-toml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("tool.poetry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my_project"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("version")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.1.0"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("description")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A sample Python project"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("authors")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Your Name <you@example.com>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("tool.poetry.dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("python")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.8"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("requests")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.25.1"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("tool.poetry.dev-dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("pytest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.2.2"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("配置项目元数据：")])]),t._v(" "),s("ul",[s("li",[t._v("它可以作为项目的元数据文件，包含项目的名称、版本、描述、作者信息等，类似于 setup.py 文件的作用。")]),t._v(" "),s("li",[t._v("如果你使用像 setuptools 这样的构建工具，这些元数据可以直接从 pyproject.toml 中读取。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("工具配置：")])]),t._v(" "),s("p",[t._v("除了构建工具和依赖管理外，pyproject.toml 还可以用来配置各种开发工具。例如，格式化工具 black 或静态分析工具 mypy 等可以在 pyproject.toml 中进行配置，而不是在项目的其他配置文件中。")]),t._v(" "),s("p",[t._v("例如，配置 black 格式化工具：")]),t._v(" "),s("div",{staticClass:"language-toml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("tool.black")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("line-length")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("target-version")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'py38'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("配置 mypy 静态类型检查：")]),t._v(" "),s("div",{staticClass:"language-toml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("tool.mypy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("ignore_missing_imports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"主要优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要优点"}},[t._v("#")]),t._v(" 主要优点")]),t._v(" "),s("ul",[s("li",[t._v("标准化配置：不同工具(如构建工具、依赖管理、代码检查)可以在同一个文件中统一配置，减少了文件的分散。")]),t._v(" "),s("li",[t._v("兼容性：随着 pyproject.toml 的标准化，越来越多的 Python 工具(如 black、mypy、tox、poetry 等)都开始支持并依赖于此文件。")]),t._v(" "),s("li",[t._v("可扩展性：通过 pyproject.toml，项目可以更方便地引入不同的构建工具和配置项，而无需维护多个配置文件")])]),t._v(" "),s("h2",{attrs:{id:"link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#link"}},[t._v("#")]),t._v(" link")]),t._v(" "),s("ul",[s("li",[t._v("config case\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/jacky1234/aiogram/blob/main/pyproject.toml",target:"_blank",rel:"noopener noreferrer"}},[t._v("aiogram-pyproject"),s("OutboundLink")],1)])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);