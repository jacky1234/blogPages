(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{547:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[s._v("#")]),s._v(" env")]),s._v(" "),a("p",[s._v("一、使用 brew 安装启动")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("brew install mysql")])]),s._v(" "),a("li",[a("code",[s._v("brew services start mysql")])])]),s._v(" "),a("p",[s._v("二、客户端")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.mysql.com/products/workbench/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySql workbench"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"custom-block theorem"},[a("p",{staticClass:"title"},[s._v("shell 使用技巧")]),a("ul",[a("li",[a("code",[s._v("ctrl + u")]),s._v(": 删除已经输入的命令")]),s._v(" "),a("li",[a("code",[s._v("ctrl + a")]),s._v(": 光标跳转到行首")]),s._v(" "),a("li",[a("code",[s._v("ctrl + e")]),s._v(": 光标跳转到行尾")])])]),a("h2",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[s._v("#")]),s._v(" options")]),s._v(" "),a("h3",{attrs:{id:"skip-grant-tables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#skip-grant-tables"}},[s._v("#")]),s._v(" "),a("code",[s._v("--skip-grant-tables")])]),s._v(" "),a("blockquote",[a("p",[s._v("顾名思义，该命令作用是跳过授权表，就是说谁都能进入 MySQL 看到所有数据表，输入任意字符账号密码都可以，当忘记账号密码时可以使用改命令修改密码，但是要随用随关，重启 mysql，不然服务器上会有很大的风险。 "),a("code",[s._v("mysqld_safe --skip-grant-tables")]),s._v(". 可以修改修改配置达到 "),a("code",[s._v("--skip-grant-tables")]),s._v(" 的效果")])]),s._v(" "),a("RText",{attrs:{text:"确认 skip-grants 是否作用"}}),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" current_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n+-----------------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" current_user                      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" skip-grants user@skip-grants "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-----------------------------------+\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"mysqldump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqldump"}},[s._v("#")]),s._v(" mysqldump")]),s._v(" "),a("ol",[a("li",[s._v("export")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysqldump "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("database"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".sql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("import")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use xxl_job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" -- 选择要导入数据的数据库\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(".sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" -- 导入 SQL 文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"mysqld-safe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqld-safe"}},[s._v("#")]),s._v(" mysqld_safe")]),s._v(" "),a("p",[s._v("The "),a("code",[s._v("mysqld_safe")]),s._v(" command is used to start and manage the MySQL server daemon (mysqld). It provides a safer way to start mysqld by handling common tasks such as starting, restarting, and stopping MySQL servers. Here are some key aspects of "),a("code",[s._v("mysqld_safe")]),s._v(":")]),s._v(" "),a("RText",{attrs:{text:"Purpose"}}),s._v(" "),a("ul",[a("li",[s._v("Safe Startup: mysqld_safe starts mysqld with error handling and automatic restarting in case mysqld encounters a problem and crashes.")]),s._v(" "),a("li",[s._v("Logging: It redirects mysqld output to a log file (hostname.err by default) in the MySQL data directory.")]),s._v(" "),a("li",[s._v("Signal Handling: It manages signals to mysqld, allowing for controlled shutdowns and restarts.")]),s._v(" "),a("li",[s._v("Privilege Dropping: mysqld_safe starts mysqld with reduced privileges for enhanced security.")])]),s._v(" "),a("RText",{attrs:{text:"Usage"}}),s._v(" "),a("p",[s._v("To use "),a("code",[s._v("mysqld_safe")]),s._v(", typically you execute it with sudo or as the mysql user (depending on your system configuration):")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" mysqld_safe "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("RText",{attrs:{text:"Common Options"}}),s._v(" "),a("ul",[a("li",[a("code",[s._v("-defaults-file=<path>")]),s._v(": Specify the path to the MySQL configuration file (my.cnf).")]),s._v(" "),a("li",[a("code",[s._v("--user=<username>")]),s._v(": Specify the user under which mysqld should run.")]),s._v(" "),a("li",[a("code",[s._v("--log-error=<file>")]),s._v(": Specify the error log file where mysqld errors are logged.")]),s._v(" "),a("li",[a("code",[s._v("--pid-file=<file>")]),s._v(": Specify the file where mysqld should write its process ID (PID).")]),s._v(" "),a("li",[a("code",[s._v("--skip-grant-tables")]),s._v(": Start mysqld with skip grant tables, which disables authentication checks for troubleshooting purposes.")])]),s._v(" "),a("h2",{attrs:{id:"mysqld"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqld"}},[s._v("#")]),s._v(" mysqld")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("mysqld")]),s._v(" is the MySQL server daemon. It is the main program that runs the MySQL database server. When you start mysqld, it listens for network connections and handles database requests from clients. Here's a bit more detail about mysqld and related components:")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("man mysqld")])]),s._v(" "),a("li",[a("code",[s._v("mysqld --verbose --help")])])]),s._v(" "),a("h2",{attrs:{id:"内置函数-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置函数-api"}},[s._v("#")]),s._v(" 内置函数 API")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.runoob.com/mysql/mysql-functions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/mysql/mysql-functions.html"),a("OutboundLink")],1)])]),s._v(" "),a("ul",[a("li",[s._v("CHAR_LENGTH")]),s._v(" "),a("li",[s._v("MAX")]),s._v(" "),a("li",[s._v("ANY")]),s._v(" "),a("li",[s._v("COUNT: "),a("code",[s._v("SELECT COUNT(*) FROM <table> xxx")]),s._v("; 查询符合条件的个数")])]),s._v(" "),a("RText",{attrs:{text:"示例"}}),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 使用子查询来查找 "poet" 表中具有最大字符长度')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id,name,author from poet WHERE CHAR_LENGTH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT MAX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CHAR_LENGTH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v(" FROM poet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"建表约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建表约束"}},[s._v("#")]),s._v(" 建表约束")]),s._v(" "),a("h3",{attrs:{id:"主键约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主键约束"}},[s._v("#")]),s._v(" 主键约束")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-- 主键约束\n-- 使某个字段不重复且不得为空, 确保表内所有数据的唯一性。\nCREATE TABLE user (\n    id INT PRIMARY KEY,\n    name VARCHAR(20)\n);\n\n-- 联合主键\n-- 联合主键中的每个字段都不能为空, 并且加起来不能和已设置的联合主键重复。\nCREATE TABLE user (\n    id INT,\n    name VARCHAR(20),\n    password VARCHAR(20),\n    PRIMARY KEY(id, name)\n);\n\n-- 自增约束\n-- 自增约束的主键由系统自动递增分配。\nCREATE TABLE user (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(20)\n);\n\n-- 添加主键约束\n-- 如果忘记设置主键, 还可以通过SQL语句设置(两种方式):\nALTER TABLE user ADD PRIMARY KEY(id);\nALTER TABLE user MODIFY id INT PRIMARY KEY;\n\n-- 删除主键\nALTER TABLE user drop PRIMARY KEY;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h3",{attrs:{id:"唯一主键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#唯一主键"}},[s._v("#")]),s._v(" 唯一主键")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-- 建表时创建唯一主键\nCREATE TABLE user (\n    id INT,\n    name VARCHAR(20),\n    UNIQUE(name)\n);\n\n-- 添加唯一主键\n-- 如果建表时没有设置唯一建, 还可以通过SQL语句设置(两种方式):\nALTER TABLE user ADD UNIQUE(name);\nALTER TABLE user MODIFY name VARCHAR(20) UNIQUE;\n\n-- 删除唯一主键\nALTER TABLE user DROP INDEX name;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"非空约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非空约束"}},[s._v("#")]),s._v(" 非空约束")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-- 建表时添加非空约束\n-- 约束某个字段不能为空\nCREATE TABLE user (\n    id INT,\n    name VARCHAR(20) NOT NULL\n);\n\n-- 移除非空约束\nALTER TABLE user MODIFY name VARCHAR(20);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"默认约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认约束"}},[s._v("#")]),s._v(" 默认约束")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-- 建表时添加默认约束\n-- 约束某个字段的默认值\nCREATE TABLE user2 (\n    id INT,\n    name VARCHAR(20),\n    age INT DEFAULT 10\n);\n\n-- 移除非空约束\nALTER TABLE user MODIFY age INT;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"外键约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外键约束"}},[s._v("#")]),s._v(" 外键约束")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("-- 班级\nCREATE TABLE classes (\n    id INT PRIMARY KEY,\n    name VARCHAR(20)\n);\n\n-- 学生表\nCREATE TABLE students (\n    id INT PRIMARY KEY,\n    name VARCHAR(20),\n    -- 这里的 class_id 要和 classes 中的 id 字段相关联\n    class_id INT,\n    -- 表示 class_id 的值必须来自于 classes 中的 id 字段值\n    FOREIGN KEY(class_id) REFERENCES classes(id)\n);\n\n-- 1. 主表(父表)classes 中没有的数据值, 在副表(子表)students 中, 是不可以使用的；\n-- 2. 主表中的记录被副表引用时, 主表不可以被删除。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"数据库设计的三大范式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库设计的三大范式"}},[s._v("#")]),s._v(" 数据库设计的三大范式")]),s._v(" "),a("blockquote",[a("p",[s._v("遵循这三大范式，可以使数据库设计更加规范和合理，减少数据冗余，提高数据的完整性和一致性。但在实际设计中，可能会根据具体的业务需求和性能考虑，做出一些适当的权衡和优化。")])]),s._v(" "),a("h3",{attrs:{id:"_1-第一范式-1nf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-第一范式-1nf"}},[s._v("#")]),s._v(" 1. 第一范式(1NF)")]),s._v(" "),a("p",[a("strong",[s._v("目标")]),s._v(": 确保数据表中的每一列都是不可再分的数据单元，所有列都应该是原子的。")]),s._v(" "),a("p",[a("strong",[s._v("特点")]),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("每个表格中的字段都必须是不可分割的最小数据单位。")]),s._v(" "),a("li",[s._v("每列中的值都必须是相同类型的数据。")]),s._v(" "),a("li",[s._v("确保每列包含的值都是唯一的。")])]),s._v(" "),a("p",[a("strong",[s._v("示例")]),s._v(":\n如果有一个表存储了员工的信息，每个字段(如姓名、年龄、地址等)都必须包含单一的数据单位，而不能将多个信息放在同一个字段中。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("EmpID")]),s._v(" "),a("th",[s._v("EmpName")]),s._v(" "),a("th",[s._v("Age")]),s._v(" "),a("th",[s._v("Address")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("Alice")]),s._v(" "),a("td",[s._v("30")]),s._v(" "),a("td",[s._v("New York")])]),s._v(" "),a("tr",[a("td",[s._v("2")]),s._v(" "),a("td",[s._v("Bob")]),s._v(" "),a("td",[s._v("25")]),s._v(" "),a("td",[s._v("Los Angeles")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-第二范式-2nf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-第二范式-2nf"}},[s._v("#")]),s._v(" 2. 第二范式(2NF)")]),s._v(" "),a("p",[a("strong",[s._v("目标")]),s._v(": 在满足第一范式的基础上，确保非主键字段完全依赖于主键。")]),s._v(" "),a("p",[a("strong",[s._v("特点")]),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("确保每个非主键字段都完全依赖于主键，而不是部分依赖。")]),s._v(" "),a("li",[s._v("主要针对组合主键，如果表中存在一个组合主键，则每个非主键字段必须依赖于整个组合主键，而不能只依赖于其中的一部分。")])]),s._v(" "),a("p",[a("strong",[s._v("示例")]),s._v(":\n如果一个表中有复合主键(例如订单 ID 和产品 ID)，那么其他列(如数量和价格)必须依赖于整个复合主键。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("OrderID")]),s._v(" "),a("th",[s._v("ProductID")]),s._v(" "),a("th",[s._v("Quantity")]),s._v(" "),a("th",[s._v("Price")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("101")]),s._v(" "),a("td",[s._v("2")]),s._v(" "),a("td",[s._v("10.00")])]),s._v(" "),a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("102")]),s._v(" "),a("td",[s._v("1")]),s._v(" "),a("td",[s._v("15.00")])]),s._v(" "),a("tr",[a("td",[s._v("2")]),s._v(" "),a("td",[s._v("101")]),s._v(" "),a("td",[s._v("1")]),s._v(" "),a("td",[s._v("10.00")])])])]),s._v(" "),a("p",[s._v("在这个表中，"),a("code",[s._v("Quantity")]),s._v(" 和 "),a("code",[s._v("Price")]),s._v(" 都完全依赖于组合主键 "),a("code",[s._v("OrderID")]),s._v(" 和 "),a("code",[s._v("ProductID")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"_3-第三范式-3nf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-第三范式-3nf"}},[s._v("#")]),s._v(" 3. 第三范式(3NF)")]),s._v(" "),a("p",[a("strong",[s._v("目标")]),s._v(": 在满足第二范式的基础上，确保非主键字段之间没有传递依赖关系。")]),s._v(" "),a("p",[a("strong",[s._v("特点")]),s._v(":")]),s._v(" "),a("ul",[a("li",[s._v("确保非主键字段之间不应存在依赖关系，所有非主键字段都只能依赖于主键。")]),s._v(" "),a("li",[s._v("消除传递依赖，使每个非主键字段直接依赖于主键，而不是通过其他非主键字段间接依赖。")])]),s._v(" "),a("p",[a("strong",[s._v("示例")]),s._v(":\n假设有一个员工表，包含部门名称，这个表存在传递依赖(部门名称依赖于部门 ID，部门 ID 依赖于员工 ID)。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("EmpID")]),s._v(" "),a("th",[s._v("EmpName")]),s._v(" "),a("th",[s._v("DeptID")]),s._v(" "),a("th",[s._v("DeptName")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("Alice")]),s._v(" "),a("td",[s._v("10")]),s._v(" "),a("td",[s._v("HR")])]),s._v(" "),a("tr",[a("td",[s._v("2")]),s._v(" "),a("td",[s._v("Bob")]),s._v(" "),a("td",[s._v("20")]),s._v(" "),a("td",[s._v("IT")])])])]),s._v(" "),a("p",[s._v("为了符合第三范式，需要将部门信息拆分成另一个表:")]),s._v(" "),a("p",[a("strong",[s._v("员工表")]),s._v(":")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("EmpID")]),s._v(" "),a("th",[s._v("EmpName")]),s._v(" "),a("th",[s._v("DeptID")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("1")]),s._v(" "),a("td",[s._v("Alice")]),s._v(" "),a("td",[s._v("10")])]),s._v(" "),a("tr",[a("td",[s._v("2")]),s._v(" "),a("td",[s._v("Bob")]),s._v(" "),a("td",[s._v("20")])])])]),s._v(" "),a("p",[a("strong",[s._v("部门表")]),s._v(":")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("DeptID")]),s._v(" "),a("th",[s._v("DeptName")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("10")]),s._v(" "),a("td",[s._v("HR")])]),s._v(" "),a("tr",[a("td",[s._v("20")]),s._v(" "),a("td",[s._v("IT")])])])]),s._v(" "),a("p",[s._v("通过这样拆分，确保 "),a("code",[s._v("DeptName")]),s._v(" 直接依赖于 "),a("code",[s._v("DeptID")]),s._v("，消除了传递依赖。")]),s._v(" "),a("h2",{attrs:{id:"other"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other"}},[s._v("#")]),s._v(" other")]),s._v(" "),a("h3",{attrs:{id:"用户及权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户及权限"}},[s._v("#")]),s._v(" 用户及权限")]),s._v(" "),a("blockquote",[a("p",[s._v("mysql 的账户系统, 是在 mysql 数据库的 user 表进行管理的。所以在操作前, 我们先进入通过 "),a("code",[s._v("mysql -u root")]),s._v(" 进入 sql shell")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("增")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("CREATE USER 'new_user'@'localhost' IDENTIFIED BY 'password';")])]),s._v(" "),a("li",[a("code",[s._v("GRANT SELECT, INSERT, UPDATE, DELETE ON your_database_name.your_table_name TO '<new_user>'@'localhost';")]),s._v(": 授权 CURD 指定的 database 的 test 表\n"),a("ul",[a("li",[a("code",[s._v("GRANT ALL PRIVILEGES ON your_database_name.* TO 'test'@'localhost';")]),s._v(": 授予所有权限")]),s._v(" "),a("li",[a("code",[s._v("GRANT ALL PRIVILEGES ON")]),s._v("%"),a("code",[s._v(".* TO")]),s._v("test"),a("code",[s._v("@")]),s._v("localhost"),a("code",[s._v("WITH GRANT OPTION")]),s._v(": 授予了用户 test 在本地(localhost)对所有数据库(%表示所有数据库)的全部权限")])])]),s._v(" "),a("li",[a("code",[s._v("GRANT USAGE ON *.* TO 'test'@'localhost'")]),s._v(": 授权 CURD 指定的 database")]),s._v(" "),a("li",[a("code",[s._v("FLUSH PRIVILEGES;")]),s._v(": Flush the privileges to ensure that the changes take effect")])])]),s._v(" "),a("li",[a("p",[s._v("查询用户")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SELECT user, host, Super_priv, Create_priv, Drop_priv, Grant_priv, Shutdown_priv FROM mysql.user;")]),s._v(" "),a("ul",[a("li",[s._v("权限信息, 包括 Super_priv(超级用户权限)、Create_priv(创建数据库权限)、Drop_priv(删除数据库权限)、Grant_priv(授权权限)和 Shutdown_priv(关闭 MySQL 服务器权限)")])])])])]),s._v(" "),a("li",[a("p",[s._v("删除用户")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("DELETE FROM mysql.user WHERE user = 'myuser';")])])])]),s._v(" "),a("li",[a("p",[s._v("查询用户权限")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SHOW GRANTS FOR '<user>'@'localhost';")])])])])]),s._v(" "),a("h3",{attrs:{id:"密码相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密码相关"}},[s._v("#")]),s._v(" 密码相关")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1772178",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://cloud.tencent.com/developer/article/1772178"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"清空数据库内的所有-tables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清空数据库内的所有-tables"}},[s._v("#")]),s._v(" 清空数据库内的所有 tables")]),s._v(" "),a("p",[s._v("要删除一个 MySQL 数据库中的所有表, 你可以执行以下步骤:")]),s._v(" "),a("p",[s._v("注意: 删除数据库中的所有表将永久删除这些表, 且无法恢复, 请谨慎操作。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("登录到 MySQL 数据库: 使用合适的 MySQL 客户端, 登录到 MySQL 数据库服务器。你需要提供有效的用户名和密码。")])]),s._v(" "),a("li",[a("p",[s._v('选择要删除表的数据库: 使用 USE 命令选择包含要删除表的数据库。例如, 如果要删除名为 "mydatabase" 的数据库中的所有表, 可以执行以下命令:')])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("USE mydatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("列出数据库中的所有表: 你可以使用以下 SQL 查询来列出数据库中的所有表:")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("SHOW TABLES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这将显示数据库中的所有表的列表。")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("循环删除所有表: 使用 "),a("code",[s._v("DROP TABLE")]),s._v(" 命令来删除数据库中的每个表。你可以使用 SHOW TABLES 查询的结果来动态构建删除命令。以下是一个示例 SQL 查询, 用于删除所有表:")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" FOREIGN_KEY_CHECKS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 禁用外键约束")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" GROUP_CONCAT_MAX_LEN"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" GROUP_CONCAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DROP TABLE '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" table_schema "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mydatabase'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@drop_queries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PREPARE")]),s._v(" drop_stmt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@drop_queries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXECUTE")]),s._v(" drop_stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEALLOCATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PREPARE")]),s._v(" drop_stmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" FOREIGN_KEY_CHECKS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 启用外键约束")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("这将生成并执行一个包含删除表的 SQL 语句, 逐一删除每个表。")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("提交更改: 使用 COMMIT 命令来提交更改:")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("COMMIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("退出 MySQL 客户端: 退出 MySQL 客户端。")])]),s._v(" "),a("p",[s._v("现在, 你的 MySQL 数据库中的所有表应该已经被删除。请务必小心操作, 确保你真的想要删除这些表, 因为这将永久删除它们, 且无法恢复。")]),s._v(" "),a("h3",{attrs:{id:"索引优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#索引优化"}},[s._v("#")]),s._v(" 索引优化")]),s._v(" "),a("p",[s._v('索引是数据库中的一种关键性能优化工具, 它可以加速数据检索操作, 特别是在大型数据集中。在上面的建议中, 我建议为 "poet" 表的 "author" 列和 "author" 表的 "name" 列创建索引, 这是为了优化连接查询的性能。下面是为什么这样做的一些原因:')]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("提高查询性能")]),s._v(": 索引允许数据库引擎更快速地查找符合查询条件的行。在连接查询中, 通过在连接列上创建索引, 数据库引擎可以更快地匹配和关联相关的行, 从而提高查询性能。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("减少扫描操作")]),s._v(": 在没有索引的情况下, 数据库可能需要执行全表扫描来查找匹配的行, 这在大型表中会非常耗时。通过使用索引, 数据库可以避免全表扫描, 而只需扫描索引, 从而显著减少了查询的执行时间。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("减少资源消耗")]),s._v(": 索引还可以减少数据库服务器的资源消耗, 因为它们允许数据库引擎更有效地执行查询。这意味着更少的 CPU 时间和内存用于查询操作, 使数据库服务器能够处理更多的请求。")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("支持唯一性约束")]),s._v(': 索引可以用于确保列中的数据的唯一性, 这对于确保数据的完整性非常重要。例如, 在 "author" 表的 "name" 列上创建唯一性索引可以确保每个作者名字是唯一的。')])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("加速排序操作")]),s._v(": 索引不仅用于加速查找操作, 还用于加速排序操作。如果您需要对查询结果进行排序, 具有适当索引的列可以显著加速排序过程。")])])]),s._v(" "),a("p",[s._v("需要注意的是, 索引并非没有代价的, 它们会增加数据库的存储需求, 并且在插入、更新和删除操作时可能引入轻微的性能开销。因此, 在设计索引时需要权衡性能需求和存储成本。")]),s._v(" "),a("p",[s._v("总之, 索引优化的目标是提高查询性能, 减少资源消耗, 并维护数据的完整性。通过在连接列上创建适当的索引, 可以显著改善连接查询的性能, 特别是在大型数据库中。")]),s._v(" "),a("h3",{attrs:{id:"where-having"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#where-having"}},[s._v("#")]),s._v(" where & having")]),s._v(" "),a("p",[s._v("WHERE 和 HAVING 子句都用于 SQL 查询中, 但它们用于不同的情况和不同的查询阶段:")]),s._v(" "),a("ol",[a("li",[s._v("WHERE 子句:")])]),s._v(" "),a("ul",[a("li",[s._v("WHERE 子句用于过滤表中的行, 它在查询的 SELECT 语句中用来筛选哪些行将被包括在结果集中。")]),s._v(" "),a("li",[s._v("WHERE 子句通常用于筛选行的基本条件, 如等于、不等于、大于、小于等操作符。")]),s._v(" "),a("li",[s._v("WHERE 子句用于筛选行之前, 因此它用于表的列。")]),s._v(" "),a("li",[s._v("在聚合查询中, WHERE 子句通常用于筛选原始数据行, 然后进行聚合。")])]),s._v(" "),a("p",[s._v("示例:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("SELECT * FROM scores WHERE score "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("HAVING 子句:")])]),s._v(" "),a("ul",[a("li",[s._v("HAVING 子句用于筛选分组后的结果, 通常与聚合函数一起使用, 如 COUNT、SUM、AVG 等。")]),s._v(" "),a("li",[s._v("HAVING 子句通常用于对聚合结果应用条件筛选, 即筛选分组的总体特性。")]),s._v(" "),a("li",[s._v("HAVING 子句用于聚合函数的结果, 而不是表的列。")])]),s._v(" "),a("p",[s._v("示例:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("SELECT COUNT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c_no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", c_no FROM score GROUP BY c_no HAVING COUNT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("c_no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在上述示例中, 第一个查询使用 WHERE 子句筛选原始数据行, 而第二个查询使用 HAVING 子句筛选了按 c_no 分组后的聚合结果, 只包括满足条件的分组。")]),s._v(" "),a("p",[s._v("总的来说, 如果您要筛选表中的原始数据行, 请使用 WHERE 子句, 而如果您要筛选聚合结果, 请使用 HAVING 子句。")]),s._v(" "),a("h3",{attrs:{id:"两个主机中的-mysql-数据库如何做到自动同步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两个主机中的-mysql-数据库如何做到自动同步"}},[s._v("#")]),s._v(" 两个主机中的 mysql 数据库如何做到自动同步")]),s._v(" "),a("p",[s._v("在 MySQL 数据库中, 实现两个主机之间的自动同步可以采用 MySQL 复制(replication)的方式。MySQL 复制是一种将一个 MySQL 服务器上的数据自动复制到另一个 MySQL 服务器上的过程。")]),s._v(" "),a("p",[s._v("以下是简单的步骤:")]),s._v(" "),a("p",[s._v("**1.设置主服务器(Master): **")]),s._v(" "),a("p",[s._v("在主服务器上, 做如下配置:")]),s._v(" "),a("div",{staticClass:"language-my.cnf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server-id=1\nlog-bin=mysql-bin\nbinlog-do-db=your_database_name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这里, server-id 是服务器的唯一标识, log-bin 启用二进制日志, binlog-do-db 指定需要复制的数据库。")]),s._v(" "),a("p",[s._v("**2.设置从服务器(Slave): **")]),s._v(" "),a("p",[s._v("在从服务器上, 做如下配置:")]),s._v(" "),a("div",{staticClass:"language-my.cnf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server-id=2\nrelay-log=mysql-relay-bin\nlog-bin=mysql-bin\nreplicate-do-db=your_database_name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("server-id 是服务器的唯一标识, relay-log 是中继日志, log-bin 启用二进制日志, replicate-do-db 指定需要复制的数据库。")]),s._v(" "),a("p",[s._v("**3.启动复制过程: **")]),s._v(" "),a("p",[s._v("在从服务器上执行以下 SQL 命令:")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("CHANGE MASTER "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v("\n  MASTER_HOST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master_host_name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  MASTER_USER"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'replication_user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  MASTER_PASSWORD"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'replication_password'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  MASTER_LOG_FILE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql-bin.XXXXXX'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  MASTER_LOG_POS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("XXX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("替换 master_host_name、replication_user、replication_password、mysql-bin.XXXXXX、XXX 为你的主服务器的信息。")]),s._v(" "),a("p",[s._v("**4.启动复制: **")]),s._v(" "),a("p",[s._v("在从服务器上执行:")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" SLAVE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这将启动从服务器上的复制进程。")]),s._v(" "),a("p",[s._v("**5.检查复制状态: **")]),s._v(" "),a("p",[s._v("在从服务器上执行:")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" SLAVE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v("\\G"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("检查 Slave_IO_Running 和 Slave_SQL_Running 的状态是否为 Yes, 表示复制正在运行。")]),s._v(" "),a("p",[s._v("这样, 你就设置了一个简单的 MySQL 复制, 使得从服务器能够自动同步主服务器的数据。请注意, 这是一个基本的配置, 具体情况可能需要根据实际需求进行调整。")]),s._v(" "),a("h3",{attrs:{id:"mysql-登陆密码忘记了"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-登陆密码忘记了"}},[s._v("#")]),s._v(" mysql 登陆密码忘记了")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://help.aliyun.com/zh/ecs/how-do-i-reset-the-mysql-root-password-when-i-forget-the-password",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://help.aliyun.com/zh/ecs/how-do-i-reset-the-mysql-root-password-when-i-forget-the-password"),a("OutboundLink")],1)])]),s._v(" "),a("ol",[a("li",[s._v("Verify MySQL Data Directory")])]),s._v(" "),a("p",[s._v("Ensure that the MySQL data directory exists and is owned by the MySQL user. This directory should contain the MySQL databases and the ibdata1 file.")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-la")]),s._v(" /usr/local/var/mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("Create or Verify my.cnf")])]),s._v(" "),a("p",[s._v("(mysql 配置文件可以通过 "),a("code",[s._v("mysql --verbose --help | grep my.cnf")]),s._v(" 查看可能的配置文件的位置)")]),s._v(" "),a("p",[s._v("Ensure that your MySQL configuration file (my.cnf) exists and is correctly configured. If it doesn't exist, create it with the necessary settings. For example:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/etc/my.cnf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Add or ensure the following content is present:")]),s._v(" "),a("div",{staticClass:"language-ini line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default Homebrew MySQL server config")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("mysqld")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Only allow connections from localhost")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind-address")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("mysqlx-bind-address")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Path to the database root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("datadir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/usr/local/var/mysql")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The MySQL server socket file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("socket")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/tmp/mysql.sock")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("client")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The MySQL client socket file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("socket")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/tmp/mysql.sock")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("Check Directory Permissions")])]),s._v(" "),a("p",[s._v("Ensure that the data directory and necessary subdirectories have the correct permissions:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" mysql:mysql /usr/local/var/mysql\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /usr/local/var/mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("Start MySQL with Verbose Logging")])]),s._v(" "),a("p",[s._v("Attempt to start MySQL manually with verbose output to get more information:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /usr/local/opt/mysql/bin/mysqld --defaults-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/etc/my.cnf --skip-grant-tables "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--verbose")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo mysqld_safe --skip-grant-tables")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("Connect to MySQL。")])]),s._v(" "),a("RText",{attrs:{text:"在新shell中执行",color:"red"}}),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" root\nALTER "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED WITH caching_sha2_password BY "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'12345678'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH PRIVILEGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("restart server & login with pwd")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("brew services restart mysql\nmysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" root "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p12345678")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"tableplus-链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tableplus-链接"}},[s._v("#")]),s._v(" tableplus 链接")]),s._v(" "),a("ol",[a("li",[s._v("Check MySQL Listening Port:")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-iTCP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sTCP:LISTEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("This command should show an output indicating that MySQL is listening on 127.0.0.1:3306.")]),s._v(" "),a("h2",{attrs:{id:"link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#link"}},[s._v("#")]),s._v(" link")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.mysql.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysql"),a("OutboundLink")],1),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/",target:"_blank",rel:"noopener noreferrer"}},[s._v("doc"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.runoob.com/mysql/mysql-functions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("runoob"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"http://www.mysqlab.net/docs/view/refman-5.1-zh/chapter/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysql 实验室"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("other\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/baagod/sql_node/blob/master/mysql/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 学习笔记"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("module\n"),a("ul",[a("li",[a("a",{attrs:{href:"http://www.mybatis.org/mybatis-3/zh/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mybatis"),a("OutboundLink")],1),s._v(", 持久层框架")])])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);