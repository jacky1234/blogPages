(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{379:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("Android Debug Bridge (adb) is a versatile command-line tool that lets you communicate with a device. The adb command facilitates a variety of device actions, such as installing and debugging apps. adb provides access to a Unix shell that you can use to run a variety of commands on a device.")])]),s._v(" "),a("p",[s._v("关于 adb 的更多介绍可见: "),a("a",{attrs:{href:"https://developer.android.com/tools/adb",target:"_blank",rel:"noopener noreferrer"}},[s._v("链接"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/mzlogin/awesome-adb",target:"_blank",rel:"noopener noreferrer"}},[s._v("awesome-adb"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developer.android.com/studio/command-line",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"common"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#common"}},[s._v("#")]),s._v(" common")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("adb shell ip address show wlan0")]),s._v(" 查看 "),a("code",[s._v("wlan0")]),s._v(" 网络接口的 IP 地址信息")]),s._v(" "),a("li",[a("code",[s._v('adb shell ifconfig | grep "inet "')]),s._v(" 获取 Android 设备的 IP 地址")]),s._v(" "),a("li",[a("code",[s._v('adb shell "su -c ifconfig"')]),s._v(" 查看和配置网络接口信息的命令")]),s._v(" "),a("li",[a("code",[s._v("adb bugreport crash.txt")]),s._v(' 生成一个完整的设备状态报告, 并包括崩溃日志。它将崩溃日志保存到名为"crash.txt"的文件中')]),s._v(" "),a("li",[a("code",[s._v("adb kill-server")]),s._v(" 结束 adb 进程")]),s._v(" "),a("li",[a("code",[s._v("adb start-server")]),s._v(" 启动 adb 进程")]),s._v(" "),a("li",[a("code",[s._v("adb install -r <apk>")])]),s._v(" "),a("li",[a("code",[s._v("adb uninstall <package_name>")])]),s._v(" "),a("li",[a("code",[s._v("adb reboot")])]),s._v(" "),a("li",[a("code",[s._v("adb shell run-as <package> cat <私有路径文件> <输出到mac端的路径>")]),s._v(": 拉取应用私有目录到 pc 端, 需要应用 debugable")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop")]),s._v(": list\n"),a("ul",[a("li",[a("code",[s._v("adb shell getprop -T")]),s._v(": Show property types instead of values")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop -Z")]),s._v(": Show property contexts instead of values")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop ro.product.cpu.abi")]),s._v(" 获取手机支持的 arm 架构")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop ro.product.model")]),s._v(" 手机型号")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop ro.build.version.release")]),s._v(" 系统版本")]),s._v(" "),a("li",[a("code",[s._v("adb shell getprop | grep -E 'ro.product.model|ro.product.brand|ro.product.device'")]),s._v(": 获取手机型号")])])])]),s._v(" "),a("h3",{attrs:{id:"dumpsys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dumpsys"}},[s._v("#")]),s._v(" dumpsys")]),s._v(" "),a("blockquote",[a("p",[s._v("dumpsys 同来用来 dumpsys 一些内存数据, 通过如下命令可以知道可以 dumpsys 哪些数据\nadb shell dumpsys -l")])]),s._v(" "),a("p",[s._v("常用的一些 dumpsys 相关的命令有:")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("adb shell dumpsys activity activities")]),s._v(" 查看前台 Activity")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity top")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity <activity_name>")]),s._v(" 获取当前 Activity 中包含的 Fragment 信息, 如 "),a("code",[s._v("adb shell dumpsys activity com.example.app/.MainActivity")]),s._v(", 如下图:")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity broadcasts | grep <packagename>")]),s._v(": 显示系统中所有广播接收器的信息，包括静态注册和动态注册的广播接收器, 通过 grep 过滤")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity intents")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity permissions")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity processes")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity providers")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity recents")])]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys activity services [<package-name>]")]),s._v(" 查看正在运行的 Services")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys meminfo <进程名称或进程ID>")]),s._v(" 内存信息")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys window | grep mCurrentFocus")]),s._v(" 获取设备的当前前台 Activity")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys SurfaceFlinger –latency")]),s._v(" 用于获取 Android 设备上 SurfaceFlinger 的延迟信息")]),s._v(" "),a("li",[a("code",[s._v("adb shell dumpsys gfxinfo $processName")]),s._v(" 用于获取特定应用程序进程的图形渲染信息")])]),s._v(" "),a("h3",{attrs:{id:"am"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#am"}},[s._v("#")]),s._v(" am")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("adb shell am -h")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("adb shell am crash")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am kill")]),s._v(": 在安全模式下杀死进程, 不影响用户体验")]),s._v(" "),a("li",[a("code",[s._v("adb shell am kill-all")]),s._v(": 杀掉所有后台程序")]),s._v(" "),a("li",[a("code",[s._v("adb shell am force-stop")]),s._v(": 应用在前台强制关闭, 强制关闭指定的 package 包应用")]),s._v(" "),a("li",[a("code",[s._v("adb shell am start -D")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am start -W")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am set-debug-app -w $package")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am set-debug-app -w --persistent $package")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am clear-debug-app $package")]),s._v(" cancel debug with launch")]),s._v(" "),a("li",[a("code",[s._v("adb shell am broadcast -a $action")])]),s._v(" "),a("li",[a("code",[s._v("adb shell am broadcast -a $action -e x.command activity -e name jacky")]),s._v(" 通过 broadcast 传递参数")])]),s._v(" "),a("h3",{attrs:{id:"pm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pm"}},[s._v("#")]),s._v(" pm")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("adb shell pm list packages")])]),s._v(" "),a("li",[a("code",[s._v("adb shell pm list packages -f -3 | grep <too> | sed 's/^package:\\(.*\\)=.*/\\1/'")]),s._v(": get the path of apk\n"),a("ul",[a("li",[s._v("with the -f flag to get the path of the app too")])])]),s._v(" "),a("li",[a("code",[s._v("adb shell pm path {package}")]),s._v(": determine its installed path on the device")]),s._v(" "),a("li",[a("code",[s._v("adb pull /data/app/com.ubercab-1/base.apk com.ubercab.apk")]),s._v(": download the APK from the device")]),s._v(" "),a("li",[a("code",[s._v("adb shell pm clear <package>")]),s._v(": 清除应用缓存")])]),s._v(" "),a("h3",{attrs:{id:"ps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ps"}},[s._v("#")]),s._v(" ps")]),s._v(" "),a("p",[a("code",[s._v("adb shell ps")]),s._v(" 命令提供了一些选项, 可以用来过滤和显示特定的进程信息。以下是一些常用的选项:")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-A")]),s._v(": 显示所有进程, 包括系统进程和应用程序进程。")]),s._v(" "),a("li",[a("code",[s._v("-a")]),s._v(": 显示除了无效的进程(已经被 init 启动的进程)之外的所有进程。")]),s._v(" "),a("li",[a("code",[s._v("-x")]),s._v(": 显示所有进程, 包括未运行的进程。")]),s._v(" "),a("li",[a("code",[s._v("-r")]),s._v(": 按照内存使用量来排序进程。")]),s._v(" "),a("li",[a("code",[s._v("-n")]),s._v(": 按照进程名字来排序进程。")]),s._v(" "),a("li",[a("code",[s._v("-s")]),s._v(": 按照进程状态来排序进程。")]),s._v(" "),a("li",[a("code",[s._v("-p")]),s._v(": 显示进程的 PID(进程标识符)。")]),s._v(" "),a("li",[a("code",[s._v("-c")]),s._v(": 显示进程的 CPU 利用率。")]),s._v(" "),a("li",[a("code",[s._v("-u")]),s._v(": 显示进程的用户名称和 UID(用户标识符)。")]),s._v(" "),a("li",[a("code",[s._v("-t")]),s._v(": 显示进程的线程信息。")]),s._v(" "),a("li",[a("code",[s._v("-Z")]),s._v(": 显示进程的安全上下文。")])]),s._v(" "),a("p",[s._v("您可以根据需要选择适当的选项来获取所需的进程信息。例如, 使用命令 adb shell ps -p 可以显示进程的 PID, 而使用命令 adb shell ps -t 可以显示进程的线程信息")]),s._v(" "),a("h3",{attrs:{id:"logcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logcat"}},[s._v("#")]),s._v(" logcat")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("adb logcat -h")])]),s._v(" "),a("li",[a("code",[s._v("adb logcat -G 16M")]),s._v(" 将缓冲区大小设置为 16MB")]),s._v(" "),a("li",[a("code",[s._v("adb logcat -c")]),s._v(" 清除设备日志缓存的 ADB 命令")]),s._v(" "),a("li",[a("code",[s._v("adb logcat -b crash")]),s._v(" 查看设备上的崩溃日志")]),s._v(" "),a("li",[s._v("日志过滤\n"),a("ul",[a("li",[a("code",[s._v("adb logcat *:V")])]),s._v(" "),a("li",[a("code",[s._v("adb logcat *:E")])]),s._v(" "),a("li",[a("code",[s._v('adb logcat -s "keyword"')])]),s._v(" "),a("li",[a("code",[s._v('adb logcat *:E -s "keyword"')])]),s._v(" "),a("li",[a("code",[s._v("adb logcat | grep -E 'regex'")])])])])]),s._v(" "),a("h3",{attrs:{id:"input"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input"}},[s._v("#")]),s._v(" input")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("adb shell input")]),s._v(" 是用于模拟输入事件的 ADB 命令, 它可以在 Android 设备上执行各种输入操作, 如按键、点击、滑动等。")])]),s._v(" "),a("p",[s._v("以下是 adb shell input 命令的一些常见用法:")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("模拟点击事件: "),a("code",[s._v("adb shell input tap x y")]),s._v("\n这里的 x 和 y 分别是屏幕上的横纵坐标, 用于指定点击的位置。")])]),s._v(" "),a("li",[a("p",[s._v("模拟按键事件: "),a("code",[s._v("adb shell input keyevent KEYCODE")]),s._v("\n这里的 KEYCODE 是表示按键码的整数值, 用于模拟按下指定的按键。(KeyCode 查询"),a("a",{attrs:{href:"https://developer.android.com/reference/android/view/KeyEvent",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),a("OutboundLink")],1),s._v(")")])]),s._v(" "),a("li",[a("p",[s._v("模拟滑动事件: "),a("code",[s._v("adb shell input swipe x1 y1 x2 y2 [duration]")]),s._v("\n这里的(x1, y1)和(x2, y2)是滑动起始点和终点的坐标, duration 表示滑动的持续时间。")])]),s._v(" "),a("li",[a("p",[s._v('模拟输入文本: adb shell input text "your_text"\n这里的 your_text 是要输入的文本内容, 可以是任意字符串。')])]),s._v(" "),a("li",[a("p",[s._v("长按某个按键: adb shell input keyevent --longpress KEYCODE\n这里的 KEYCODE 是表示按键码的整数值, 用于模拟长按指定的按键。")])])]),s._v(" "),a("p",[s._v("注意: 使用 "),a("code",[s._v("adb shell input")]),s._v(' 命令需要连接到 Android 设备, 并且设备必须具有开发者选项中的"USB 调试"选项已启用。此外, 某些命令可能需要 Root 权限才能执行。')]),s._v(" "),a("h2",{attrs:{id:"tricks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tricks"}},[s._v("#")]),s._v(" Tricks")]),s._v(" "),a("ul",[a("li",[s._v("dump anr info")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("adb shell\nrun-as "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$package")]),s._v(" // run app as root\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" SIGQUIT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[s._v("#")]),s._v(" 实践")]),s._v(" "),a("h3",{attrs:{id:"访问私有目录文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问私有目录文件"}},[s._v("#")]),s._v(" 访问私有目录文件")]),s._v(" "),a("blockquote",[a("p",[s._v("下面使用的常规方法获取私有目录权限, 所以此方法需要 app 可调试")])]),s._v(" "),a("ol",[a("li",[a("code",[s._v("run-as $package")]),s._v(" 将指定目录压缩")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zcvf")]),s._v(" mojituo.tar.gz "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$dir")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("退出手机 shell, 将数据流重定向到 mac 端")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("adb shell run-as "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("上述目录的打包成zip的路径"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("输出到mac端的路径"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("二、release 日志")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("private val DEBUG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Log.isLoggable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MessageFragment"')]),s._v(", Log.DEBUG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nadb shell setprop log.tag.Main D\nadb shell setprop log.tag.MessageFragment   D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"接口转发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口转发"}},[s._v("#")]),s._v(" 接口转发")]),s._v(" "),a("p",[s._v("【背景】咨询一个网络的问题, 我这里有两台设备,分别为 PC 和 Android A 设备,这两个设备处于同一个 wifi 下面, 比如 wifi 名称为 wifiA。\n另外有一个设备 Android B, 处于一些原因没有连接到 wifiA。而是通过热点连接到 Android A 的热点上, 从而 PC 和 Android B 也能互通私有的资源。\nAndroid B 的 ip 地址为: "),a("code",[s._v("192.168.254.193")]),s._v("。 另外 Android B 上面安装了 frida 服务, 如果 PC 要访问 Android B 的服务, 我这里通过如下命令进行连接:\n"),a("code",[s._v("objection -N --host 192.168.254.193 --port 1234 explore")])]),s._v(" "),a("p",[s._v("最终的结果是:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Unable to connect to the frida server: unable to connect to remote frida-server: Could not connect to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".254.193: Operation timed out\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("以下的回答供参考 "),a("RText",{attrs:{text:"chatGPT",color:"green"}}),s._v(", 并没有测试通过:")],1)]),s._v(" "),a("p",[s._v("根据您提供的信息, 我们可以看到 Android B 连接到了 Android A 的热点上, 这会导致 Android B 和 PC 处于不同的子网中, 因此 PC 无法直接访问 Android B 的 IP 地址。为了解决这个问题, 您可以尝试通过以下步骤进行操作:")]),s._v(" "),a("p",[s._v("一、在 Android A 上启用 IP 转发功能。 在 Android A 的终端上运行以下命令:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /proc/sys/net/ipv4/ip_forward\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("这将启用 Android A 上的 IP 转发功能, 使其可以将来自 PC 的请求转发到 Android B。")]),s._v(" "),a("p",[s._v("二、设置 Android B 的默认网关。\n在 Android B 的终端上运行以下命令:")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v("\nroute "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" default gw "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".43.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("其中, 192.168.43.1 是 Android A 的 IP 地址, 这将设置 Android B 的默认网关为 Android A 的 IP 地址。")]),s._v(" "),a("p",[s._v("三、在 PC 上设置路由规则。\n在 PC 上运行以下命令:\n"),a("code",[s._v("route add -net 192.168.254.0 netmask 255.255.255.0 gw 192.168.43.119")]),s._v("\n其中, 192.168.43.119 是 Android A 的 IP 地址, 这将设置 PC 的路由规则, 使其可以将请求发送到 Android A。")]),s._v(" "),a("h3",{attrs:{id:"写入数据到手机-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写入数据到手机-脚本"}},[s._v("#")]),s._v(" 写入数据到手机，脚本")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' <input_text>"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("input_text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("local_temp_file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp/temp_cache_123.txt"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检测设备连接情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_devices")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("adb devices "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"device$"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-z")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$connected_devices")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"没有找到设备，请检查设备连接"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果连接了多个设备，要求用户选择")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$connected_devices")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-gt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"检测到多个设备，请选择一个进行写入:"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("device")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$connected_devices")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"选择的设备: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device")]),s._v('"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"无效选择，请重试."')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只有一个设备")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("device")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$connected_devices")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"检测到一个设备: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将输入文本写入本地临时文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$input_text")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$local_temp_file")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将本地临时文件推送到指定设备")]),s._v("\nadb "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$device")]),s._v('"')]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$local_temp_file")]),s._v('"')]),s._v(" /sdcard/widget/cache.txt\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("push_status")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除本地临时文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$local_temp_file")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$push_status")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"写入失败"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"写入成功，地址: /sdcard/widget/cache.txt"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);