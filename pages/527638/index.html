<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pandas | Jacky&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="勤学如春起之苗, 不见其增, 日有所长；辍学如磨刀之石, 不见其损, 日有所亏。">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blogPages/assets/css/0.styles.83b5fbe5.css" as="style"><link rel="preload" href="/blogPages/assets/js/app.7e06e929.js" as="script"><link rel="preload" href="/blogPages/assets/js/2.ce95ee6e.js" as="script"><link rel="preload" href="/blogPages/assets/js/215.be04d383.js" as="script"><link rel="preload" href="/blogPages/assets/js/6.69b19f48.js" as="script"><link rel="prefetch" href="/blogPages/assets/js/10.effd2b33.js"><link rel="prefetch" href="/blogPages/assets/js/100.856fcc53.js"><link rel="prefetch" href="/blogPages/assets/js/101.2fe04807.js"><link rel="prefetch" href="/blogPages/assets/js/102.a570fe0b.js"><link rel="prefetch" href="/blogPages/assets/js/103.00546020.js"><link rel="prefetch" href="/blogPages/assets/js/104.d78b38da.js"><link rel="prefetch" href="/blogPages/assets/js/105.8feb4296.js"><link rel="prefetch" href="/blogPages/assets/js/106.e16f62e7.js"><link rel="prefetch" href="/blogPages/assets/js/107.1750545e.js"><link rel="prefetch" href="/blogPages/assets/js/108.cb3ca371.js"><link rel="prefetch" href="/blogPages/assets/js/109.e6ef1c19.js"><link rel="prefetch" href="/blogPages/assets/js/11.713c286e.js"><link rel="prefetch" href="/blogPages/assets/js/110.38b88640.js"><link rel="prefetch" href="/blogPages/assets/js/111.546521ea.js"><link rel="prefetch" href="/blogPages/assets/js/112.6b0ef40e.js"><link rel="prefetch" href="/blogPages/assets/js/113.8b689694.js"><link rel="prefetch" href="/blogPages/assets/js/114.efb0d75d.js"><link rel="prefetch" href="/blogPages/assets/js/115.b3450440.js"><link rel="prefetch" href="/blogPages/assets/js/116.59a8a82a.js"><link rel="prefetch" href="/blogPages/assets/js/117.a9e3d4c3.js"><link rel="prefetch" href="/blogPages/assets/js/118.1958ce33.js"><link rel="prefetch" href="/blogPages/assets/js/119.405c1672.js"><link rel="prefetch" href="/blogPages/assets/js/12.2815f35b.js"><link rel="prefetch" href="/blogPages/assets/js/120.e2740dd1.js"><link rel="prefetch" href="/blogPages/assets/js/121.0aa78c4e.js"><link rel="prefetch" href="/blogPages/assets/js/122.7fe22975.js"><link rel="prefetch" href="/blogPages/assets/js/123.7e9ba265.js"><link rel="prefetch" href="/blogPages/assets/js/124.de810087.js"><link rel="prefetch" href="/blogPages/assets/js/125.de7aba6e.js"><link rel="prefetch" href="/blogPages/assets/js/126.b8d307f4.js"><link rel="prefetch" href="/blogPages/assets/js/127.b944c6bd.js"><link rel="prefetch" href="/blogPages/assets/js/128.d9fbd218.js"><link rel="prefetch" href="/blogPages/assets/js/129.9f32686a.js"><link rel="prefetch" href="/blogPages/assets/js/13.d27b9fe5.js"><link rel="prefetch" href="/blogPages/assets/js/130.4234001e.js"><link rel="prefetch" href="/blogPages/assets/js/131.5fbc5fd4.js"><link rel="prefetch" href="/blogPages/assets/js/132.6e85e726.js"><link rel="prefetch" href="/blogPages/assets/js/133.1b9b2012.js"><link rel="prefetch" href="/blogPages/assets/js/134.ddd33937.js"><link rel="prefetch" href="/blogPages/assets/js/135.cb7a50a2.js"><link rel="prefetch" href="/blogPages/assets/js/136.db91a988.js"><link rel="prefetch" href="/blogPages/assets/js/137.f31a522d.js"><link rel="prefetch" href="/blogPages/assets/js/138.367e06be.js"><link rel="prefetch" href="/blogPages/assets/js/139.769ea4af.js"><link rel="prefetch" href="/blogPages/assets/js/14.fdde4a68.js"><link rel="prefetch" href="/blogPages/assets/js/140.2ee3edb4.js"><link rel="prefetch" href="/blogPages/assets/js/141.1244633c.js"><link rel="prefetch" href="/blogPages/assets/js/142.66c748b7.js"><link rel="prefetch" href="/blogPages/assets/js/143.24875298.js"><link rel="prefetch" href="/blogPages/assets/js/144.9812ea81.js"><link rel="prefetch" href="/blogPages/assets/js/145.acd0069a.js"><link rel="prefetch" href="/blogPages/assets/js/146.39ce1178.js"><link rel="prefetch" href="/blogPages/assets/js/147.8272cac5.js"><link rel="prefetch" href="/blogPages/assets/js/148.b96b2996.js"><link rel="prefetch" href="/blogPages/assets/js/149.d150cff8.js"><link rel="prefetch" href="/blogPages/assets/js/15.222f035d.js"><link rel="prefetch" href="/blogPages/assets/js/150.50288e9f.js"><link rel="prefetch" href="/blogPages/assets/js/151.0eb10e98.js"><link rel="prefetch" href="/blogPages/assets/js/152.b01dd6dc.js"><link rel="prefetch" href="/blogPages/assets/js/153.5bbdea0d.js"><link rel="prefetch" href="/blogPages/assets/js/154.c2893844.js"><link rel="prefetch" href="/blogPages/assets/js/155.b4853cfe.js"><link rel="prefetch" href="/blogPages/assets/js/156.3a320751.js"><link rel="prefetch" href="/blogPages/assets/js/157.2a6c017a.js"><link rel="prefetch" href="/blogPages/assets/js/158.a526bc4b.js"><link rel="prefetch" href="/blogPages/assets/js/159.0fa12b9e.js"><link rel="prefetch" href="/blogPages/assets/js/16.32123a80.js"><link rel="prefetch" href="/blogPages/assets/js/160.794a2fab.js"><link rel="prefetch" href="/blogPages/assets/js/161.37ca7986.js"><link rel="prefetch" href="/blogPages/assets/js/162.f326722e.js"><link rel="prefetch" href="/blogPages/assets/js/163.713a7700.js"><link rel="prefetch" href="/blogPages/assets/js/164.bf9a07e3.js"><link rel="prefetch" href="/blogPages/assets/js/165.7daed5e5.js"><link rel="prefetch" href="/blogPages/assets/js/166.d60901fe.js"><link rel="prefetch" href="/blogPages/assets/js/167.1db96ae6.js"><link rel="prefetch" href="/blogPages/assets/js/168.06a6de79.js"><link rel="prefetch" href="/blogPages/assets/js/169.b28e42a7.js"><link rel="prefetch" href="/blogPages/assets/js/17.80f38037.js"><link rel="prefetch" href="/blogPages/assets/js/170.5e2b19ac.js"><link rel="prefetch" href="/blogPages/assets/js/171.90db8586.js"><link rel="prefetch" href="/blogPages/assets/js/172.cc24f14b.js"><link rel="prefetch" href="/blogPages/assets/js/173.fe9a6f35.js"><link rel="prefetch" href="/blogPages/assets/js/174.374b8ab4.js"><link rel="prefetch" href="/blogPages/assets/js/175.096a945e.js"><link rel="prefetch" href="/blogPages/assets/js/176.284db50d.js"><link rel="prefetch" href="/blogPages/assets/js/177.6e9e60bf.js"><link rel="prefetch" href="/blogPages/assets/js/178.48bedc23.js"><link rel="prefetch" href="/blogPages/assets/js/179.c2841c5f.js"><link rel="prefetch" href="/blogPages/assets/js/18.a934f28e.js"><link rel="prefetch" href="/blogPages/assets/js/180.832ec21f.js"><link rel="prefetch" href="/blogPages/assets/js/181.edf08aa8.js"><link rel="prefetch" href="/blogPages/assets/js/182.24f1be2e.js"><link rel="prefetch" href="/blogPages/assets/js/183.52a67e98.js"><link rel="prefetch" href="/blogPages/assets/js/184.c5b66db2.js"><link rel="prefetch" href="/blogPages/assets/js/185.1530ae0c.js"><link rel="prefetch" href="/blogPages/assets/js/186.fff99cfa.js"><link rel="prefetch" href="/blogPages/assets/js/187.33cf6355.js"><link rel="prefetch" href="/blogPages/assets/js/188.2bee451f.js"><link rel="prefetch" href="/blogPages/assets/js/189.9ad6c9bc.js"><link rel="prefetch" href="/blogPages/assets/js/19.afa8e383.js"><link rel="prefetch" href="/blogPages/assets/js/190.e09ec135.js"><link rel="prefetch" href="/blogPages/assets/js/191.e442adbb.js"><link rel="prefetch" href="/blogPages/assets/js/192.1d52114b.js"><link rel="prefetch" href="/blogPages/assets/js/193.dd17e4c6.js"><link rel="prefetch" href="/blogPages/assets/js/194.807a9f9b.js"><link rel="prefetch" href="/blogPages/assets/js/195.714e39d4.js"><link rel="prefetch" href="/blogPages/assets/js/196.dec82a34.js"><link rel="prefetch" href="/blogPages/assets/js/197.2ae1eb8f.js"><link rel="prefetch" href="/blogPages/assets/js/198.a118e965.js"><link rel="prefetch" href="/blogPages/assets/js/199.b9ee0287.js"><link rel="prefetch" href="/blogPages/assets/js/20.6d521f87.js"><link rel="prefetch" href="/blogPages/assets/js/200.43ba144f.js"><link rel="prefetch" href="/blogPages/assets/js/201.367b7a45.js"><link rel="prefetch" href="/blogPages/assets/js/202.38830093.js"><link rel="prefetch" href="/blogPages/assets/js/203.a2f798c8.js"><link rel="prefetch" href="/blogPages/assets/js/204.b6ea19da.js"><link rel="prefetch" href="/blogPages/assets/js/205.db88bf4e.js"><link rel="prefetch" href="/blogPages/assets/js/206.7e6160bd.js"><link rel="prefetch" href="/blogPages/assets/js/207.689001c6.js"><link rel="prefetch" href="/blogPages/assets/js/208.f95afd68.js"><link rel="prefetch" href="/blogPages/assets/js/209.52968bd5.js"><link rel="prefetch" href="/blogPages/assets/js/21.891edb5e.js"><link rel="prefetch" href="/blogPages/assets/js/210.81ce8c94.js"><link rel="prefetch" href="/blogPages/assets/js/211.10b3d3a1.js"><link rel="prefetch" href="/blogPages/assets/js/212.b59c8e05.js"><link rel="prefetch" href="/blogPages/assets/js/213.4f466de5.js"><link rel="prefetch" href="/blogPages/assets/js/214.79e0d90a.js"><link rel="prefetch" href="/blogPages/assets/js/216.30ed7240.js"><link rel="prefetch" href="/blogPages/assets/js/217.dc1e844c.js"><link rel="prefetch" href="/blogPages/assets/js/218.8b529da0.js"><link rel="prefetch" href="/blogPages/assets/js/219.bdfd22ce.js"><link rel="prefetch" href="/blogPages/assets/js/22.9cefb9ed.js"><link rel="prefetch" href="/blogPages/assets/js/220.cd2d6b20.js"><link rel="prefetch" href="/blogPages/assets/js/221.e378215e.js"><link rel="prefetch" href="/blogPages/assets/js/222.96f337e3.js"><link rel="prefetch" href="/blogPages/assets/js/223.10e37547.js"><link rel="prefetch" href="/blogPages/assets/js/224.6613fa26.js"><link rel="prefetch" href="/blogPages/assets/js/225.e8de9e4b.js"><link rel="prefetch" href="/blogPages/assets/js/226.52cf7a7e.js"><link rel="prefetch" href="/blogPages/assets/js/227.6e1150c5.js"><link rel="prefetch" href="/blogPages/assets/js/228.59195d3c.js"><link rel="prefetch" href="/blogPages/assets/js/229.7a8af49b.js"><link rel="prefetch" href="/blogPages/assets/js/23.3e7db05d.js"><link rel="prefetch" href="/blogPages/assets/js/230.b59e7082.js"><link rel="prefetch" href="/blogPages/assets/js/231.c7b11961.js"><link rel="prefetch" href="/blogPages/assets/js/232.4d615f62.js"><link rel="prefetch" href="/blogPages/assets/js/233.322e6a38.js"><link rel="prefetch" href="/blogPages/assets/js/234.f726741a.js"><link rel="prefetch" href="/blogPages/assets/js/235.2d2fc6b7.js"><link rel="prefetch" href="/blogPages/assets/js/236.b0765fb6.js"><link rel="prefetch" href="/blogPages/assets/js/237.b522514f.js"><link rel="prefetch" href="/blogPages/assets/js/238.b0a10949.js"><link rel="prefetch" href="/blogPages/assets/js/239.e05cd6f7.js"><link rel="prefetch" href="/blogPages/assets/js/24.09089cf2.js"><link rel="prefetch" href="/blogPages/assets/js/240.8017efae.js"><link rel="prefetch" href="/blogPages/assets/js/241.a647dc00.js"><link rel="prefetch" href="/blogPages/assets/js/242.a39755a2.js"><link rel="prefetch" href="/blogPages/assets/js/243.f22cc879.js"><link rel="prefetch" href="/blogPages/assets/js/244.0251a355.js"><link rel="prefetch" href="/blogPages/assets/js/245.030f97d6.js"><link rel="prefetch" href="/blogPages/assets/js/246.eb65f86c.js"><link rel="prefetch" href="/blogPages/assets/js/247.83f1228a.js"><link rel="prefetch" href="/blogPages/assets/js/248.8baf02b9.js"><link rel="prefetch" href="/blogPages/assets/js/249.c12ad9dd.js"><link rel="prefetch" href="/blogPages/assets/js/25.1dcde82e.js"><link rel="prefetch" href="/blogPages/assets/js/250.1e367ae0.js"><link rel="prefetch" href="/blogPages/assets/js/251.cd3b8b6c.js"><link rel="prefetch" href="/blogPages/assets/js/252.c1d9e95b.js"><link rel="prefetch" href="/blogPages/assets/js/253.0f3b2b2b.js"><link rel="prefetch" href="/blogPages/assets/js/254.1300bf58.js"><link rel="prefetch" href="/blogPages/assets/js/255.e71e8fd1.js"><link rel="prefetch" href="/blogPages/assets/js/256.a781b878.js"><link rel="prefetch" href="/blogPages/assets/js/257.6047bce5.js"><link rel="prefetch" href="/blogPages/assets/js/258.2b75ca4f.js"><link rel="prefetch" href="/blogPages/assets/js/259.3dac3542.js"><link rel="prefetch" href="/blogPages/assets/js/26.442a5284.js"><link rel="prefetch" href="/blogPages/assets/js/260.4f015c64.js"><link rel="prefetch" href="/blogPages/assets/js/261.bbd6a104.js"><link rel="prefetch" href="/blogPages/assets/js/262.543e9a41.js"><link rel="prefetch" href="/blogPages/assets/js/263.45578d1f.js"><link rel="prefetch" href="/blogPages/assets/js/264.961c7815.js"><link rel="prefetch" href="/blogPages/assets/js/265.393c48e3.js"><link rel="prefetch" href="/blogPages/assets/js/266.6a246b1d.js"><link rel="prefetch" href="/blogPages/assets/js/267.5ead7519.js"><link rel="prefetch" href="/blogPages/assets/js/268.ac8f322a.js"><link rel="prefetch" href="/blogPages/assets/js/269.2c7ceab6.js"><link rel="prefetch" href="/blogPages/assets/js/27.1a40b968.js"><link rel="prefetch" href="/blogPages/assets/js/270.0574c03d.js"><link rel="prefetch" href="/blogPages/assets/js/271.f1659e2f.js"><link rel="prefetch" href="/blogPages/assets/js/272.eb2050fc.js"><link rel="prefetch" href="/blogPages/assets/js/273.354a789a.js"><link rel="prefetch" href="/blogPages/assets/js/274.1228e133.js"><link rel="prefetch" href="/blogPages/assets/js/275.394c4ec9.js"><link rel="prefetch" href="/blogPages/assets/js/276.65895377.js"><link rel="prefetch" href="/blogPages/assets/js/277.7839383e.js"><link rel="prefetch" href="/blogPages/assets/js/28.865d52b2.js"><link rel="prefetch" href="/blogPages/assets/js/29.8acf9431.js"><link rel="prefetch" href="/blogPages/assets/js/3.42b83bd2.js"><link rel="prefetch" href="/blogPages/assets/js/30.94f1b647.js"><link rel="prefetch" href="/blogPages/assets/js/31.708ebdf9.js"><link rel="prefetch" href="/blogPages/assets/js/32.7f03de55.js"><link rel="prefetch" href="/blogPages/assets/js/33.4f017467.js"><link rel="prefetch" href="/blogPages/assets/js/34.f5c2f907.js"><link rel="prefetch" href="/blogPages/assets/js/35.aa001f48.js"><link rel="prefetch" href="/blogPages/assets/js/36.eb60c85a.js"><link rel="prefetch" href="/blogPages/assets/js/37.e31fbe86.js"><link rel="prefetch" href="/blogPages/assets/js/38.952a3c65.js"><link rel="prefetch" href="/blogPages/assets/js/39.fa701de3.js"><link rel="prefetch" href="/blogPages/assets/js/4.cad3a178.js"><link rel="prefetch" href="/blogPages/assets/js/40.f1146ac7.js"><link rel="prefetch" href="/blogPages/assets/js/41.b41b1524.js"><link rel="prefetch" href="/blogPages/assets/js/42.67e51ac3.js"><link rel="prefetch" href="/blogPages/assets/js/43.5b8ee8b1.js"><link rel="prefetch" href="/blogPages/assets/js/44.7a2933f9.js"><link rel="prefetch" href="/blogPages/assets/js/45.43eca009.js"><link rel="prefetch" href="/blogPages/assets/js/46.8b17b531.js"><link rel="prefetch" href="/blogPages/assets/js/47.51f3b902.js"><link rel="prefetch" href="/blogPages/assets/js/48.dcdcecdf.js"><link rel="prefetch" href="/blogPages/assets/js/49.7ebd93d4.js"><link rel="prefetch" href="/blogPages/assets/js/5.9b78ed29.js"><link rel="prefetch" href="/blogPages/assets/js/50.bc20668e.js"><link rel="prefetch" href="/blogPages/assets/js/51.f624689e.js"><link rel="prefetch" href="/blogPages/assets/js/52.32587c4c.js"><link rel="prefetch" href="/blogPages/assets/js/53.9597d1d9.js"><link rel="prefetch" href="/blogPages/assets/js/54.ebbd8840.js"><link rel="prefetch" href="/blogPages/assets/js/55.216003cc.js"><link rel="prefetch" href="/blogPages/assets/js/56.d8aa6c5c.js"><link rel="prefetch" href="/blogPages/assets/js/57.d6b75d95.js"><link rel="prefetch" href="/blogPages/assets/js/58.c26ae01e.js"><link rel="prefetch" href="/blogPages/assets/js/59.2e9430c6.js"><link rel="prefetch" href="/blogPages/assets/js/60.d0b4f988.js"><link rel="prefetch" href="/blogPages/assets/js/61.56295b49.js"><link rel="prefetch" href="/blogPages/assets/js/62.a80cb665.js"><link rel="prefetch" href="/blogPages/assets/js/63.6fc0066e.js"><link rel="prefetch" href="/blogPages/assets/js/64.40c9dcdc.js"><link rel="prefetch" href="/blogPages/assets/js/65.ea35b2e8.js"><link rel="prefetch" href="/blogPages/assets/js/66.2b77f97d.js"><link rel="prefetch" href="/blogPages/assets/js/67.ce376cf5.js"><link rel="prefetch" href="/blogPages/assets/js/68.588eaf51.js"><link rel="prefetch" href="/blogPages/assets/js/69.bb1ef415.js"><link rel="prefetch" href="/blogPages/assets/js/7.0e22bc5e.js"><link rel="prefetch" href="/blogPages/assets/js/70.8fc3bef9.js"><link rel="prefetch" href="/blogPages/assets/js/71.e445ff46.js"><link rel="prefetch" href="/blogPages/assets/js/72.51a05da1.js"><link rel="prefetch" href="/blogPages/assets/js/73.3e9b6a2b.js"><link rel="prefetch" href="/blogPages/assets/js/74.3719d2db.js"><link rel="prefetch" href="/blogPages/assets/js/75.74255ca6.js"><link rel="prefetch" href="/blogPages/assets/js/76.1b43e06f.js"><link rel="prefetch" href="/blogPages/assets/js/77.1fd95d8f.js"><link rel="prefetch" href="/blogPages/assets/js/78.7c73f45b.js"><link rel="prefetch" href="/blogPages/assets/js/79.a31c58be.js"><link rel="prefetch" href="/blogPages/assets/js/8.5fb41da7.js"><link rel="prefetch" href="/blogPages/assets/js/80.92e6bf0a.js"><link rel="prefetch" href="/blogPages/assets/js/81.84f5f558.js"><link rel="prefetch" href="/blogPages/assets/js/82.4ad9f313.js"><link rel="prefetch" href="/blogPages/assets/js/83.d767f201.js"><link rel="prefetch" href="/blogPages/assets/js/84.f85a0682.js"><link rel="prefetch" href="/blogPages/assets/js/85.d23f3225.js"><link rel="prefetch" href="/blogPages/assets/js/86.d30659c0.js"><link rel="prefetch" href="/blogPages/assets/js/87.060b5818.js"><link rel="prefetch" href="/blogPages/assets/js/88.391b0507.js"><link rel="prefetch" href="/blogPages/assets/js/89.f5f35918.js"><link rel="prefetch" href="/blogPages/assets/js/9.a45a02f8.js"><link rel="prefetch" href="/blogPages/assets/js/90.f6afb3ec.js"><link rel="prefetch" href="/blogPages/assets/js/91.9028eb49.js"><link rel="prefetch" href="/blogPages/assets/js/92.4607a108.js"><link rel="prefetch" href="/blogPages/assets/js/93.780c6d79.js"><link rel="prefetch" href="/blogPages/assets/js/94.11ed27dd.js"><link rel="prefetch" href="/blogPages/assets/js/95.dc3ecec1.js"><link rel="prefetch" href="/blogPages/assets/js/96.440f5259.js"><link rel="prefetch" href="/blogPages/assets/js/97.e43387fc.js"><link rel="prefetch" href="/blogPages/assets/js/98.ae9203a0.js"><link rel="prefetch" href="/blogPages/assets/js/99.853784cd.js">
    <link rel="stylesheet" href="/blogPages/assets/css/0.styles.83b5fbe5.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogPages/" class="home-link router-link-active"><!----> <span class="site-name">Jacky's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogPages/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blogPages/fe/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blogPages/web/" class="nav-link">web</a></li><li class="dropdown-subitem"><a href="/blogPages/android/" class="nav-link">android</a></li><li class="dropdown-subitem"><a href="/blogPages/iOS/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/blogPages/vue/" class="nav-link">vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blogPages/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogPages/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blogPages/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blogPages/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/blogPages/pages/5a96b7/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/blogPages/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogPages/tool/" class="nav-link">tool</a></li><li class="dropdown-item"><!----> <a href="/blogPages/algo/" class="nav-link">algo</a></li><li class="dropdown-item"><!----> <a href="/blogPages/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/blogPages/java/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/blogPages/server/" class="nav-link">server</a></li><li class="dropdown-item"><!----> <a href="/blogPages/growth/" class="nav-link">growth</a></li><li class="dropdown-item"><!----> <a href="/blogPages/pages/0fe5d6/" class="nav-link">frida</a></li><li class="dropdown-item"><!----> <a href="/blogPages/blog/" class="nav-link">blog</a></li><li class="dropdown-item"><!----> <a href="/blogPages/sp/" class="nav-link">SP</a></li><li class="dropdown-item"><!----> <a href="/blogPages/more/" class="nav-link">more</a></li></ul></div></div> <a href="https://github.com/jacky1234" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://raw.githubusercontent.com/jacky1234/picArchieve/master/uPic/dUmDI0.jpg"> <div class="blogger-info"><h3>Jack Yang</h3> <span>编程; 随笔</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blogPages/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blogPages/fe/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blogPages/web/" class="nav-link">web</a></li><li class="dropdown-subitem"><a href="/blogPages/android/" class="nav-link">android</a></li><li class="dropdown-subitem"><a href="/blogPages/iOS/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/blogPages/vue/" class="nav-link">vue</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blogPages/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogPages/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blogPages/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blogPages/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="/blogPages/pages/5a96b7/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/blogPages/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogPages/tool/" class="nav-link">tool</a></li><li class="dropdown-item"><!----> <a href="/blogPages/algo/" class="nav-link">algo</a></li><li class="dropdown-item"><!----> <a href="/blogPages/python/" class="nav-link">python</a></li><li class="dropdown-item"><!----> <a href="/blogPages/java/" class="nav-link">java</a></li><li class="dropdown-item"><!----> <a href="/blogPages/server/" class="nav-link">server</a></li><li class="dropdown-item"><!----> <a href="/blogPages/growth/" class="nav-link">growth</a></li><li class="dropdown-item"><!----> <a href="/blogPages/pages/0fe5d6/" class="nav-link">frida</a></li><li class="dropdown-item"><!----> <a href="/blogPages/blog/" class="nav-link">blog</a></li><li class="dropdown-item"><!----> <a href="/blogPages/sp/" class="nav-link">SP</a></li><li class="dropdown-item"><!----> <a href="/blogPages/more/" class="nav-link">more</a></li></ul></div></div> <a href="https://github.com/jacky1234" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>grammar</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/blogPages/pages/02f88a/" class="sidebar-link">python base</a></li><li><a href="/blogPages/pages/8ea1b2/" class="sidebar-link">python module</a></li><li><a href="/blogPages/pages/859666/" class="sidebar-link">py_snip</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>module</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogPages/pages/527638/" aria-current="page" class="active sidebar-link">pandas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blogPages/pages/527638/#常用-api" class="sidebar-link">常用 API</a></li><li class="sidebar-sub-header level2"><a href="/blogPages/pages/527638/#api" class="sidebar-link">api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#merge" class="sidebar-link">merge</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#expanding" class="sidebar-link">expanding</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#stack" class="sidebar-link">stack</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#unstack" class="sidebar-link">unstack</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#melt" class="sidebar-link">melt</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#pivot-数据透视表" class="sidebar-link">pivot (数据透视表)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blogPages/pages/527638/#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#wide-format" class="sidebar-link">wide format</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#long-format" class="sidebar-link">long format</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#颜色映射" class="sidebar-link">颜色映射</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#timeit魔法命令" class="sidebar-link">%timeit魔法命令</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#pyarrow" class="sidebar-link">pyarrow</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#堆叠的数据" class="sidebar-link">堆叠的数据</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#数据透视表" class="sidebar-link">数据透视表</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#groupby-和-pivot-table" class="sidebar-link">groupby 和 pivot_table</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#堆叠的数据与宽格式-长格式" class="sidebar-link">堆叠的数据与宽格式, 长格式</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#style" class="sidebar-link">style</a></li><li class="sidebar-sub-header level3"><a href="/blogPages/pages/527638/#shift-和-rolling" class="sidebar-link">shift 和 rolling</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blogPages/pages/527638/#链接" class="sidebar-link">链接</a></li></ul></li><li><a href="/blogPages/pages/9e17a2/" class="sidebar-link">numpy</a></li><li><a href="/blogPages/pages/68268a/" class="sidebar-link">matplotlib</a></li><li><a href="/blogPages/pages/3aeda3/" class="sidebar-link">beautysoup</a></li><li><a href="/blogPages/pages/c915b4/" class="sidebar-link">scrapy</a></li><li><a href="/blogPages/pages/890366/" class="sidebar-link">splash</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/blogPages/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/blogPages/categories/?category=%E3%80%8Apython%E3%80%8B" title="分类" data-v-06225672>《python》</a></li><li data-v-06225672><a href="/blogPages/categories/?category=module" title="分类" data-v-06225672>module</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/jacky1234" target="_blank" title="作者" class="beLink" data-v-06225672>Jacky</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-09-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">pandas<!----></h1> <!----> <div class="theme-vdoing-content content__default"><blockquote><p><a href="https://pandas.pydata.org/" target="_blank" rel="noopener noreferrer">pandas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a fast, powerful, flexible and easy to use open source data analysis and manipulation tool, built on top of the Python programming language.</p></blockquote> <h2 id="常用-api"><a href="#常用-api" class="header-anchor">#</a> 常用 API</h2> <ul><li><p><strong>导入数据:</strong></p> <ul><li><code>pd.read_csv(filename)</code>: 从 CSV 文件导入数据</li> <li><code>pd.read_table(filename)</code>: 从限定分隔符的文本文件导入数据</li> <li><code>pd.read_excel(filename)</code>: 从 Excel 文件导入数据</li> <li><code>pd.read_sql(query, connection_object)</code>: 从 SQL 表/库导入数据</li> <li><code>pd.read_json(json_string)</code>: 从 JSON 格式的字符串导入数据</li> <li><code>pd.read_html(url)</code>: 解析 URL、字符串或者 HTML 文件, 抽取其中的 tables 表格</li> <li><code>pd.read_clipboard()</code>: 从你的粘贴板获取内容, 并传给 read_table()</li> <li><code>pd.DataFrame(dict)</code>: 从字典对象导入数据, Key 是列名, Value 是数据</li></ul></li> <li><p><strong>导出数据:</strong></p> <ul><li><code>df.to_csv(filename)</code>: 导出数据到 CSV 文件</li> <li><code>df.to_excel(filename)</code>: 导出数据到 Excel 文件</li> <li><code>df.to_sql(table_name, connection_object)</code>: 导出数据到 SQL 表</li> <li><code>df.to_json(filename)</code>: 以 Json 格式导出数据到文本文件</li></ul></li> <li><p><strong>创建测试对象:</strong></p> <ul><li><code>pd.DataFrame(np.random.rand(20,5))</code>: 创建 20 行 5 列的随机数组成的 DataFrame 对象</li> <li><code>pd.Series(my_list)</code>: 从可迭代对象 my_list 创建一个 Series 对象</li> <li><code>df.index = pd.date_range('1900/1/30', periods=df.shape[0])</code>: 增加一个日期索引</li> <li><code>np.random.randn(5, 5)</code>: 生成一个形状为 (5, 5) 的 NumPy 数组, 其中的值是从标准正态分布(均值为 0, 标准差为 1)中随机抽取的</li> <li><code>np.random.rand(10, 2) * 5</code>: 首先生成一个形状为 (10, 2) 的随机数组, 其中的值在 0 到 1 之间, 然后将所有值乘以 5</li></ul></li> <li><p><strong>查看、检查数据:</strong></p> <ul><li><code>df.head(n)</code>: 查看 DataFrame 对象的前 n 行</li> <li><code>df.tail(n)</code>: 查看 DataFrame 对象的最后 n 行</li> <li><code>df.shape</code>: 查看行数和列数</li> <li><code>df.info()</code>: 查看索引、数据类型和内存信息</li> <li><code>df.describe()</code>: 查看数值型列的汇总统计</li> <li><code>s.value_counts(dropna=False)</code>: 查看 Series 对象的唯一值和计数</li> <li><code>df.apply(pd.Series.value_counts)</code>: 查看 DataFrame 对象中每一列的唯一值和计数</li></ul></li> <li><p><strong>数据选取:</strong></p> <ul><li><code>df[col]</code>: 根据列名, 并以 Series 的形式返回列</li> <li><code>df[[col1, col2]]</code>: 以 DataFrame 形式返回多列</li> <li><code>s.iloc[0]</code>: 按位置选取数据</li> <li><code>s.loc['index_one']</code>: 按索引选取数据</li> <li><code>s.loc[lambda df: df['A'] &gt; 0, :]</code></li> <li><code>df.at[0, 'xxx']</code>: 只能接受一行和一列作为输入参数。</li> <li><code>df.iloc[0,:]</code>: 返回第一行</li> <li><code>df.iloc[0,0]</code>: 返回第一列的第一个元素</li> <li><code>df.iloc[:, :2]</code>: 返回前两列数据</li> <li><code>df.iloc[:, lambda df: [0, 1]]</code></li> <li><code>df.values[:,:-1]</code>: 返回除了最后一列的其他列的所以数据</li> <li><code>df.query('[1, 2] not in c')</code>: 返回 c 列中不包含 1, 2 的其他数据集</li></ul></li> <li><p><strong>数据清理:</strong></p> <ul><li><code>df.columns = ['a','b','c']</code>: 重命名列名</li> <li><code>pd.isnull()</code>: 检查 DataFrame 对象中的空值, 并返回一个 Boolean 数组</li> <li><code>pd.notnull()</code>: 检查 DataFrame 对象中的非空值, 并返回一个 Boolean 数组</li> <li><code>df.dropna()</code>: 删除所有包含空值的行</li> <li><code>df.dropna(axis=1)</code>: 删除所有包含空值的列</li> <li><code>df.dropna(axis=1,thresh=n)</code>: 删除所有小于 n 个非空值的行</li> <li><code>df.fillna(x)</code>: 用 x 替换 DataFrame 对象中所有的空值</li> <li><code>s.astype(float)</code>: 将 Series 中的数据类型更改为 float 类型</li> <li><code>s.replace(1,'one')</code>: 用‘one’代替所有等于 1 的值</li> <li><code>s.replace([1,3],['one','three'])</code>: 用'one'代替 1, 用'three'代替 3</li> <li><code>df.rename(columns=lambda x: x + 1)</code>: 批量更改列名</li> <li><code>df.rename(columns={'old_name': 'new\* name'})</code>: 选择性更改列名</li> <li><code>df.set_index('column_one')</code>: 更改索引列</li> <li><code>df.rename(index=lambda x: x + 1)</code>: 批量重命名索引</li></ul></li> <li><p><strong>数据处理: :Filter、Sort 和 GroupBy</strong></p> <ul><li><code>df[df[col] &gt; 0.5]</code>: 选择 col 列的值大于 0.5 的行</li> <li><code>df.sort_values(col1)</code>: 按照列 col1 排序数据, 默认升序排列</li> <li><code>df.sort_values(col2, ascending=False)</code>: 按照列 col1 降序排列数据</li> <li><code>df.sort_values([col1,col2], ascending=[True,False])</code>: 先按列 col1 升序排列, 后按 col2 降序排列数据</li> <li><code>df.groupby(col)</code>: 返回一个按列 col 进行分组的 Groupby 对象</li> <li><code>df.groupby([col1,col2])</code>: 返回一个按多列进行分组的 Groupby 对象</li> <li><code>df.groupby(col1)[col2]</code>: 返回按列 col1 进行分组后, 列 col2 的均值</li> <li><code>df.pivot_table(index=col1, values=[col2,col3], aggfunc=max)</code>: 创建一个按列 col1 进行分组, 并计算 col2 和 col3 的最大值的数据透视表</li> <li><code>df.groupby(col1).agg(np.mean)</code>: 返回按列 col1 分组的所有列的均值</li> <li><code>df.eval</code>: 用于在 DataFrame 上执行表达式的方法, 这些表达式通常包含 DataFrame 的列。<code>eval()</code> 方法能够进行高效的列操作, 因为它在内部利用了底层的 NumPy 操作
<code>eval</code> 方法用于执行字符串表达式作为有效的 Python 表达式, 用于计算并生成新列或替换现有列的值。</li> <li><code>data.apply(np.mean)</code>: 对 DataFrame 中的每一列应用函数 np.mean</li> <li><code>data.apply(np.max,axis=1)</code>: 对 DataFrame 中的每一行应用函数 np.max</li></ul></li> <li><p><strong>数据合并:</strong></p> <ul><li><code>df1.append(df2)</code>: 将 df2 中的行添加到 df1 的尾部</li> <li><code>df.concat([df1, df2],axis=1)</code>: 将 df2 中的列添加到 df1 的尾部</li> <li><code>df1.join(df2,on=col1,how='inner')</code>: 对 df1 的列和 df2 的列执行 SQL 形式的 join</li></ul></li> <li><p><strong>数据统计:</strong></p> <ul><li><code>df.describe()</code>: 查看数据值列的汇总统计</li> <li><code>df.mean()</code>: 返回所有列的均值</li> <li><code>df.corr()</code>: 返回列与列之间的相关系数</li> <li><code>df.count()</code>: 返回每一列中的非空值的个数</li> <li><code>df.max()</code>: 返回每一列的最大值</li> <li><code>df.min()</code>: 返回每一列的最小值</li> <li><code>df.median()</code>: 返回每一列的中位数</li> <li><code>df.std()</code>: 返回每一列的标准差</li> <li><code>(df[xx] &gt; 0).sum()</code>: 返回 xx 大于 0 的个数</li></ul></li></ul> <h2 id="api"><a href="#api" class="header-anchor">#</a> api</h2> <h3 id="merge"><a href="#merge" class="header-anchor">#</a> merge</h3> <p>pandas 库提供了多个用于合并数据的 API, 其中最常用的是 merge 函数。merge 函数用于将两个或多个 DataFrame 对象按照一个或多个键(共同的列)进行合并。以下是 merge 函数的基本用法和一些关键参数:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>result <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'inner'</span><span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> left_on<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> right_on<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> left_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> sort<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>left</code>: 要合并的左侧 DataFrame。</li> <li><code>right</code>: 要合并的右侧 DataFrame。</li> <li><code>how</code>: 指定如何合并。常见选项包括:
<ul><li>'inner'(默认值): 取两个 DataFrame 的交集, 只保留两者都有的键。</li> <li>'outer': 取两个 DataFrame 的并集, 保留所有键, 缺失的数据用 NaN 填充。</li> <li>'left': 以左侧 DataFrame 的键为基准, 保留所有左侧键。</li> <li>'right': 以右侧 DataFrame 的键为基准, 保留所有右侧键。</li></ul></li> <li><code>on</code>: 指定用于合并的列名(键)。可以是单个列名的字符串, 也可以是多个列名组成的列表。</li> <li><code>left_on</code>: 指定左侧 DataFrame 用于合并的列名(键)。</li> <li><code>right_on</code>: 指定右侧 DataFrame 用于合并的列名(键)。</li> <li><code>left_index</code> 和 <code>right_index</code>: 如果为 True, 表示使用左侧或右侧 DataFrame 的索引作为合并键。</li> <li><code>sort</code>: 如果为 True, 则合并后的结果将按合并键排序。</li></ul> <p>示例用法:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 合并两个DataFrame, 以'key'列为基准, 默认使用'inner'方式</span>
result <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'key'</span><span class="token punctuation">)</span>

<span class="token comment"># 使用多个键进行合并</span>
result <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'key1'</span><span class="token punctuation">,</span> <span class="token string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 以左侧DataFrame的索引为合并键</span>
result <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> left_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 以左侧DataFrame的'key'列和右侧DataFrame的'key'列进行合并, 使用'outer'方式</span>
result <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'key'</span><span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>merge</code> 函数提供了强大的合并和连接数据的能力, 你可以根据不同的场景和需求选择不同的合并方式。</p> <h3 id="expanding"><a href="#expanding" class="header-anchor">#</a> expanding</h3> <blockquote><p>S.expanding() 作用及使用场景</p></blockquote> <p><code>S.expanding()</code> 是 Pandas Series 和 DataFrame 对象的一个方法, 用于创建一个展开窗口。展开窗口是一个类似滑动窗口的概念, 但不会移动, 它从序列的开始一直扩展到当前位置。展开窗口对于计算累积、移动平均或其他累积性的统计量非常有用。</p> <p>使用场景:</p> <ul><li><strong>累积统计</strong>: 展开窗口可以用来计算累积统计量, 如累积和、累积平均、累积方差等。</li> <li><strong>滚动平均</strong>: 如果你需要计算移动平均值, 但不需要滑动窗口, 你可以使用展开窗口。</li> <li><strong>分析时间序列数据</strong>: 在时间序列数据分析中, 展开窗口通常用于计算累积收益、累积收益率等。</li></ul> <p>以下是一个示例, 演示如何使用 S.expanding()来计算累积和:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 创建一个示例 Series</span>
S <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 使用 expanding() 计算累积和,计算过程详解</span>
<span class="token comment">#   在位置 0, 展开窗口包括值 [1], 所以累积和是 1。</span>
<span class="token comment">#   在位置 1, 展开窗口包括值 [1, 2], 所以累积和是 1 + 2 = 3。</span>
<span class="token comment">#   在位置 2, 展开窗口包括值 [1, 2, 3], 所以累积和是 1 + 2 + 3 = 6。</span>
<span class="token comment">#   在位置 3, 展开窗口包括值 [1, 2, 3, 4], 所以累积和是 1 + 2 + 3 + 4 = 10。</span>
<span class="token comment">#   在位置 4, 展开窗口包括值 [1, 2, 3, 4, 5], 所以累积和是 1 + 2 + 3 + 4 + 5 = 15。</span>
cumulative_sum <span class="token operator">=</span> S<span class="token punctuation">.</span>expanding<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>cumulative_sum<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以上代码将生成一个包含累积和的新 Series, 其中每个元素都是原始 Series 中对应位置及之前所有元素的累积和。这对于分析和可视化时间序列数据以及执行累积性计算非常有用。</p> <h3 id="stack"><a href="#stack" class="header-anchor">#</a> stack</h3> <p>pandas 中的 DataFrame 对象提供了 stack() 方法, 用于将数据<strong>从列堆叠到行</strong>, 从而创建一个具有多级索引的新 Series 对象。这个方法通常在数据透视和重塑操作中非常有用。</p> <p><strong>举例说明</strong>: 原始数据为如下的 df, 通过 stack 的内容变化展示</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>原始 <span class="token operator">&lt;</span>class <span class="token string">'pandas.core.frame.DataFrame'</span><span class="token operator">&gt;</span>:
    A       B
  one two one two
X   <span class="token number">1</span>   <span class="token number">4</span>   <span class="token number">7</span>  <span class="token number">10</span>
Y   <span class="token number">2</span>   <span class="token number">5</span>   <span class="token number">8</span>  <span class="token number">11</span>
Z   <span class="token number">3</span>   <span class="token number">6</span>   <span class="token number">9</span>  <span class="token number">12</span>

堆叠后的 <span class="token operator">&lt;</span>class <span class="token string">'pandas.core.frame.DataFrame'</span><span class="token operator">&gt;</span>:
       A   B
X one  <span class="token number">1</span>   <span class="token number">7</span>
  two  <span class="token number">4</span>  <span class="token number">10</span>
Y one  <span class="token number">2</span>   <span class="token number">8</span>
  two  <span class="token number">5</span>  <span class="token number">11</span>
Z one  <span class="token number">3</span>   <span class="token number">9</span>
  two  <span class="token number">6</span>  <span class="token number">12</span>

堆叠后的<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>class <span class="token string">'pandas.core.series.Series'</span><span class="token operator">&gt;</span>:
X  one  A     <span class="token number">1</span>
        B     <span class="token number">7</span>
   two  A     <span class="token number">4</span>
        B    <span class="token number">10</span>
Y  one  A     <span class="token number">2</span>
        B     <span class="token number">8</span>
   two  A     <span class="token number">5</span>
        B    <span class="token number">11</span>
Z  one  A     <span class="token number">3</span>
        B     <span class="token number">9</span>
   two  A     <span class="token number">6</span>
        B    <span class="token number">12</span>
dtype: int64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="unstack"><a href="#unstack" class="header-anchor">#</a> unstack</h3> <p><code>unstack</code> 是 Pandas 中用于<strong>数据透视</strong>的函数之一, 它用于将堆叠的数据重新排列为未堆叠的形式, 通常用于将多层索引的数据逆转。以下是 unstack 函数的一些常见用法和示例:</p> <p>**语法: **</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>DataFrame<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span>level<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>level</strong>: 可选参数, 指定要取消堆叠的索引级别。默认是取消最内层(level=-1)的堆叠。</li> <li><strong>fill_value</strong>: 可选参数, 用于替换缺失值(NaN)的值。</li></ul> <p>**示例: **
假设有一个多层索引的 DataFrame:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'X'</span><span class="token punctuation">,</span> <span class="token string">'Y'</span><span class="token punctuation">,</span> <span class="token string">'Z'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>**基本使用: **
默认情况下, unstack 会取消堆叠最内层的索引:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>unstacked <span class="token operator">=</span> df<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>**指定取消堆叠的级别: **
您可以通过指定 level 参数来取消堆叠特定级别的索引。例如, 要取消堆叠第一级别的索引:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>unstacked <span class="token operator">=</span> df<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span>level<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>**处理缺失值: **
如果在取消堆叠后出现缺失值, 您可以使用 fill_value 参数来指定要填充的值。例如, 使用 0 来填充缺失值:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>unstacked <span class="token operator">=</span> df<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span>fill_value<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>unstack 的逆操作是 stack, 它可以将未堆叠的数据重新堆叠成多层索引的形式。这两个函数通常用于数据重塑和透视操作, 以便更方便地进行数据分析和处理。</p> <h3 id="melt"><a href="#melt" class="header-anchor">#</a> melt</h3> <p>melt 函数, 其作用是将 DataFrame 从宽格式(wide format)转换为长格式(long format)。这通常用于数据重塑和数据可视化, 特别是在需要绘制多个变量的某种关系图时。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'config'</span><span class="token punctuation">:</span> <span class="token string">'0-0-0'</span><span class="token punctuation">,</span> <span class="token string">'onLegoPopViewPreLoad'</span><span class="token punctuation">:</span> <span class="token number">2443</span><span class="token punctuation">,</span> <span class="token string">'pid'</span><span class="token punctuation">:</span> <span class="token number">30838</span><span class="token punctuation">,</span> <span class="token string">'xxx'</span><span class="token punctuation">:</span> <span class="token number">2451</span><span class="token punctuation">,</span> <span class="token string">'yy'</span><span class="token punctuation">:</span> <span class="token number">2453</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'config'</span><span class="token punctuation">:</span> <span class="token string">'0-0-0'</span><span class="token punctuation">,</span> <span class="token string">'onLegoPopViewPreLoad'</span><span class="token punctuation">:</span> <span class="token number">2549</span><span class="token punctuation">,</span> <span class="token string">'pid'</span><span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">'xxx'</span><span class="token punctuation">:</span> <span class="token number">2749</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">'config'</span><span class="token punctuation">:</span> <span class="token string">'0-100-1000'</span><span class="token punctuation">,</span> <span class="token string">'onLegoPopViewPreLoad'</span><span class="token punctuation">:</span> <span class="token number">2549</span><span class="token punctuation">,</span> <span class="token string">'pid'</span><span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">'xxx'</span><span class="token punctuation">:</span> <span class="token number">2749</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token comment"># 创建DataFrame</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

melted <span class="token operator">=</span> df<span class="token punctuation">.</span>melt<span class="token punctuation">(</span>id_vars<span class="token operator">=</span><span class="token string">'config'</span><span class="token punctuation">,</span> value_vars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'onLegoPopViewPreLoad'</span><span class="token punctuation">,</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token string">'yy'</span><span class="token punctuation">,</span> <span class="token string">'pid'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> var_name<span class="token operator">=</span><span class="token string">'Event'</span><span class="token punctuation">)</span>
mean <span class="token operator">=</span> melted<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'config'</span><span class="token punctuation">,</span> <span class="token string">'Event'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> mean<span class="token punctuation">.</span>unstack<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上述的输出结果如下:</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>Event       onLegoPopViewPreLoad      pid     xxx      yy
config
0-0-0                     2496.0  20419.0  2600.0  2453.0
0-100-1000                2549.0  10000.0  2749.0     NaN
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>让我解释一下上述代码中的参数和作用:</p> <ul><li>df: 这是包含原始数据的 DataFrame。</li> <li>id_vars='config': 这是一个可选参数, 用于指定在转换时要保留的列。在这里, 我们希望保留 config 列, 因为它将成为长格式的行索引。</li> <li>value_vars=['onLegoPopViewPreLoad', 'xxx', 'yy']: 这是一个可选参数, 用于指定要包含在长格式中的值列。我们选择了三个事件列: onLegoPopViewPreLoad、xxx 和 yy。</li> <li>var_name='Event': 这是一个可选参数, 用于指定新创建的列, 它将包含之前的事件列的名称。我们将其命名为 Event, 表示不同事件类型。</li></ul> <p>通过运行 melt 函数, 原始宽格式的 DataFrame df 被重塑为长格式的 DataFrame melted, 其中 config 列作为行索引, Event 列用于标识事件类型, value 列包含了对应事件的值。这种长格式通常更适合用于绘制某些类型的图表, 如柱状图或折线图, 以便更好地可视化数据。</p> <h3 id="pivot-数据透视表"><a href="#pivot-数据透视表" class="header-anchor">#</a> pivot (数据透视表)</h3> <span style="color:green;font-weight:bold;" data-v-35c53164>简单示例</span> <p>当您想要对堆叠的数据进行透视(pivot)操作时, Pandas 中的 pivot_table 方法非常有用。这方法允许您在多维数据中重新排列和聚合数据以进行分析。以下是一个示例, 演示如何使用 pivot_table 进行透视操作:</p> <p>假设您有以下数据, 记录了不同产品在不同月份的销售额:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'Product'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'Month'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Jan'</span><span class="token punctuation">,</span> <span class="token string">'Jan'</span><span class="token punctuation">,</span> <span class="token string">'Feb'</span><span class="token punctuation">,</span> <span class="token string">'Feb'</span><span class="token punctuation">,</span> <span class="token string">'Jan'</span><span class="token punctuation">,</span> <span class="token string">'Feb'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'Sales'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>要对这些数据进行透视, 您可以使用 pivot_table 方法, 将产品(Product)作为行索引, 月份(Month)作为列索引, 并将销售额(Sales)作为值来进行汇总。示例代码如下:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pivot_df <span class="token operator">=</span> df<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token string">'Product'</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'Month'</span><span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token string">'Sales'</span><span class="token punctuation">,</span> aggfunc<span class="token operator">=</span><span class="token string">'sum'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这将生成一个新的 DataFrame <code>pivot_df</code>, 其中行索引是产品(Product), 列索引是月份(Month), 每个单元格的值表示销售额的总和。最后, 您可以按照需要进行数据分析和可视化。</p> <p>参数 aggfunc:
aggfunc 的默认值是&quot;mean&quot;, 表示使用平均值来聚合数据。但是, 您可以根据需要将其更改为其他聚合函数, 例如 &quot;sum&quot; 表示求和, &quot;count&quot; 表示计数, &quot;min&quot; 表示最小值, &quot;max&quot; 表示最大值等等。</p> <p>这是 pivot_table 方法的一个简单示例, 用于将堆叠的数据重新排列以进行分析。根据您的数据和分析需求, 您可以选择不同的索引、列和聚合函数来完成透视操作。</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="wide-format"><a href="#wide-format" class="header-anchor">#</a> wide format</h3> <p>&quot;wide format&quot;(宽格式)是一种数据排列格式, 其中每个变量通常以列的形式表示, 每一行则表示一个观察结果。在宽格式中, 数据通常会占据更多的列, 而行数相对较少。这种格式通常用于数据的录入、查看和简单的统计汇总。<a href="https://stefvanbuuren.name/fimd/sec-longandwide.html" target="_blank" rel="noopener noreferrer">longandwide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>举个例子, 假设你有一个包含学生考试成绩的数据集, 其中每个学生有多个科目的成绩。在宽格式中, 数据可能如下所示: :</strong></li></ul> <table><thead><tr><th>学生</th> <th>科目 1</th> <th>科目 2</th> <th>科目 3</th></tr></thead> <tbody><tr><td>A</td> <td>90</td> <td>85</td> <td>78</td></tr> <tr><td>B</td> <td>88</td> <td>92</td> <td>75</td></tr> <tr><td>C</td> <td>76</td> <td>89</td> <td>82</td></tr></tbody></table> <ul><li><p><strong>在上面的示例中, 每个学生的成绩分布在不同的列中, 每一列代表一个科目。这是宽格式的典型示例。:</strong></p></li> <li><p><strong>宽格式通常适合于人工录入和查看, 但在某些情况下, 特别是在数据分析和可视化方面, 更适合使用:</strong>&quot;long format&quot;(长格式), 其中数据的排列更具灵活性, 以便进行更多类型的操作和分析。例如, 长格式数据通常更容易用于绘制多变量关系图、进行数据透视表操作以及进行各种数据分析任务。</p></li></ul> <h3 id="long-format"><a href="#long-format" class="header-anchor">#</a> long format</h3> <p>&quot;Long format&quot;(长格式)是一种数据排列格式, 其中每个变量和其对应的值通常以行的形式表示, 而每一列表示不同的属性。在长格式中, 数据通常会占据更多的行, 而列数相对较多。这种格式通常更适合用于数据分析、可视化和处理多变量数据。<a href="https://stefvanbuuren.name/fimd/sec-longandwide.html" target="_blank" rel="noopener noreferrer">longandwide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>举个例子, 假设你有一个包含学生考试成绩的数据集, 其中每个学生有多个科目的成绩。在长格式中, 数据可能如下所示: :</strong></li></ul> <table><thead><tr><th>学生</th> <th>科目</th> <th>成绩</th></tr></thead> <tbody><tr><td>A</td> <td>科目 1</td> <td>90</td></tr> <tr><td>A</td> <td>科目 2</td> <td>85</td></tr> <tr><td>A</td> <td>科目 3</td> <td>78</td></tr> <tr><td>B</td> <td>科目 1</td> <td>88</td></tr> <tr><td>B</td> <td>科目 2</td> <td>92</td></tr> <tr><td>B</td> <td>科目 3</td> <td>75</td></tr> <tr><td>C</td> <td>科目 1</td> <td>76</td></tr> <tr><td>C</td> <td>科目 2</td> <td>89</td></tr> <tr><td>C</td> <td>科目 3</td> <td>82</td></tr></tbody></table> <ul><li><p><strong>在上面的示例中, 每一行表示一个学生的成绩, 包括学生的姓名、所修科目和相应的成绩。这是长格式的典型示例。:</strong></p></li> <li><p><strong>长格式通常更适合在数据分析、数据透视表、多变量关系图和其他复杂数据处理任务中使用。它提供了更大的灵活性, 可以更容易地进行多变量分析和数据操作。长格式也更容易与多种数据分析工具和库兼容。:</strong></p></li></ul> <h3 id="颜色映射"><a href="#颜色映射" class="header-anchor">#</a> 颜色映射</h3> <p>颜色映射是数据可视化中常用的工具, 它将数值范围映射到不同的颜色, 以帮助观察者理解数据的分布和趋势。</p> <p>Matplotlib(一个常用的 Python 数据可视化库)提供了众多内置的颜色映射, 以满足不同数据可视化需求。以下是一些常见的颜色映射名称:</p> <ul><li>&quot;viridis&quot;</li> <li>&quot;plasma&quot;</li> <li>&quot;inferno&quot;</li> <li>&quot;magma&quot;</li> <li>&quot;cividis&quot;</li> <li>&quot;gray&quot;</li> <li>&quot;bone&quot;</li> <li>&quot;hot&quot;</li> <li>&quot;cool&quot;</li> <li>&quot;Wistia&quot;</li> <li>&quot;autumn&quot;</li> <li>&quot;winter&quot;</li> <li>&quot;spring&quot;</li> <li>&quot;summer&quot;</li> <li>&quot;seismic&quot;</li> <li>&quot;YlGnBu&quot;</li> <li>&quot;YlOrRd&quot;</li> <li>&quot;RdYlBu&quot;</li> <li>&quot;RdYlGn&quot;</li> <li>&quot;coolwarm&quot;</li></ul> <p>这只是其中一小部分, Matplotlib 中提供了更多的颜色映射供选择。你可以根据数据的性质和可视化需求选择适当的颜色映射。要查看 Matplotlib 中可用的所有颜色映射, 你可以访问官方文档或使用如下代码:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

cmaps <span class="token operator">=</span> plt<span class="token punctuation">.</span>colormaps<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>cmaps<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这将打印出 Matplotlib 中可用的所有颜色映射名称列表。不同的颜色映射在颜色梯度和视觉效果上有所不同, 因此你可以根据你的数据和审美需求选择合适的颜色映射。</p> <h3 id="timeit魔法命令"><a href="#timeit魔法命令" class="header-anchor">#</a> <code>%timeit</code>魔法命令</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>%timeit df.apply<span class="token punctuation">(</span>lambda x: integrate_f<span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span>, x<span class="token punctuation">[</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span>, x<span class="token punctuation">[</span><span class="token string">&quot;N&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>, <span class="token assign-left variable">axis</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token number">116</span> ms +- <span class="token number">5.56</span> ms per loop <span class="token punctuation">(</span>mean +- std. dev. of <span class="token number">7</span> runs, <span class="token number">10</span> loops each<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>%timeit 是一个用于在 Jupyter Notebook 中测试代码性能的魔法命令。在你的示例中, 你正在测试一个 DataFrame 上的 apply 函数, 该函数使用一个 lambda 函数来对 DataFrame 的每一行执行一个操作。在这种情况下, 你测试了对 DataFrame 的每一行应用 integrate_f 函数, 其中 integrate_f 函数需要每一行的 &quot;a,&quot; &quot;b,&quot; 和 &quot;N&quot; 列作为输入参数。</p> <p><code>%timeit</code> 命令返回一些性能测量信息, 包括:</p> <ul><li>执行这行代码的平均时间(mean)</li> <li>执行这行代码的标准差(std. dev.)</li> <li>总共运行的次数(7 runs)</li> <li>循环的次数(10 loops each)</li></ul> <p>在你的示例中, 你的代码平均需要 116 毫秒执行一次, 并且标准差约为 5.56 毫秒。这是通过多次执行代码并计算平均值和标准差得出的结果。你的代码在 7 次运行中平均需要 116 毫秒。</p> <p>%timeit 很有用, 因为它可以帮助你比较不同方法的性能, 找出哪种方法更有效。</p> <h3 id="pyarrow"><a href="#pyarrow" class="header-anchor">#</a> pyarrow</h3> <p>PyArrow(Apache Arrow 的 Python 实现)在 Pandas 中的角色是提供了一种高效的数据格式和数据交换方法, 以便在 Pandas 和其他数据处理工具之间进行数据交互。它主要发挥以下作用:</p> <ul><li><p><strong>高性能数据交换</strong>: PyArrow 提供了一个内存布局, 可以在 Pandas 和其他支持 Arrow 的数据处理工具之间进行高效的数据交换, 而无需复制或数据转换。这提高了数据处理速度, 特别是在大数据集的情况下。</p></li> <li><p><strong>Columnar 数据结构</strong>: Arrow 的数据结构是列式的(columnar), 这与 Pandas 的数据帧(DataFrame)非常相似。这种列式存储结构在分析大数据集时非常高效, 因为它可以有效地进行压缩、并行处理和查询。</p></li> <li><p><strong>跨平台和跨语言支持</strong>: PyArrow 的 Arrow 数据格式是一种跨平台和跨语言的数据交换格式。这意味着你可以在不同编程语言之间轻松共享和交换数据, 包括 Python、C++、Java、R 等。</p></li> <li><p><strong>文件格式</strong>: Arrow 还定义了一种列式文件格式(Arrow Flight), 使得数据可以轻松存储为可跨平台的列式文件, 而无需经历复杂的数据导出和导入过程。</p></li> <li><p><strong>互操作性</strong>: Arrow 的存在增强了 Pandas 与其他数据处理工具、数据库和存储系统之间的互操作性。它允许 Pandas 用户更轻松地与其他工具集成和交换数据。</p></li></ul> <p>总之, PyArrow 作为 Pandas 的附加库, 提供了高性能、跨平台和跨语言的数据交换机制, 有助于改进 Pandas 与其他数据处理工具之间的数据交互, 并提高数据处理效率。</p> <h3 id="堆叠的数据"><a href="#堆叠的数据" class="header-anchor">#</a> 堆叠的数据</h3> <p>堆叠的数据是一种多层索引的数据结构, 通常用于表示多维数据或多维度数据。在这种结构中, 数据被组织为多个层次的索引, 每个索引级别代表数据的一个维度或特征。这种数据结构在数据分析中非常有用, 因为它可以帮助组织和分析复杂的多维数据。</p> <p>多层索引的数据结构可以在 Pandas 中使用 DataFrame 或 Series 来表示。每个索引级别都用于唯一标识数据点, 并且可以具体表示不同维度或特征中的取值。这使得堆叠的数据非常适用于存储和分析多类别数据、时间序列数据、多组实验数据等。</p> <p>通过使用多层索引, 您可以更轻松地进行数据切片、筛选、分组和聚合操作, 以及绘制多维数据的图表和可视化。这使得堆叠的数据结构成为处理复杂数据的有力工具, 有助于更深入地理解数据中的关系和趋势。</p> <p><strong>举例</strong></p> <p>让我们通过一个示例来说明堆叠的数据结构。假设您正在分析某个公司的销售数据, 其中包括不同产品、不同地区和不同时间的销售额。您希望将这些数据以堆叠的方式组织, 以便更容易进行分析。</p> <p>假设您的原始数据如下:</p> <div class="language-plaintext line-numbers-mode"><pre class="language-plaintext"><code>Product    Region    Date       Sales
A          North     2021-01-01  100
B          North     2021-01-01  150
A          South     2021-01-01  120
B          South     2021-01-01  130
A          North     2021-01-02  110
B          North     2021-01-02  160
A          South     2021-01-02  130
B          South     2021-01-02  140
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>您可以使用堆叠的数据结构将数据重组为一个多层索引的 DataFrame。在这个示例中, 您可以将 &quot;Product&quot;、&quot;Region&quot; 和 &quot;Date&quot; 列作为索引级别, 以便在数据中表示产品、地区和时间的不同维度。</p> <p>重组后的数据结构如下:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'Product'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'Region'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'North'</span><span class="token punctuation">,</span> <span class="token string">'North'</span><span class="token punctuation">,</span> <span class="token string">'South'</span><span class="token punctuation">,</span> <span class="token string">'South'</span><span class="token punctuation">,</span> <span class="token string">'North'</span><span class="token punctuation">,</span> <span class="token string">'North'</span><span class="token punctuation">,</span> <span class="token string">'South'</span><span class="token punctuation">,</span> <span class="token string">'South'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'Date'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'2021-01-01'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-01'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-01'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-01'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-02'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-02'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-02'</span><span class="token punctuation">,</span> <span class="token string">'2021-01-02'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'Sales'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>set_index<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Product'</span><span class="token punctuation">,</span> <span class="token string">'Region'</span><span class="token punctuation">,</span> <span class="token string">'Date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>现在, 您的数据已经以堆叠的方式组织, 并可以轻松地进行多维分析。您可以按照不同索引级别进行切片、筛选和聚合操作, 以获取有关销售的更详细信息。例如, 您可以轻松地计算不同产品在不同地区和不同日期的销售总额, 或者绘制产品销售随时间的趋势图。</p> <p>这是堆叠的数据结构如何帮助组织和分析多维数据的示例。它使数据分析更加灵活和有力。</p> <p>**堆叠的数据相对于堆叠前有什么好处: **</p> <p>堆叠的数据结构相对于未堆叠的数据具有一些好处, 特别是在多维数据分析和可视化方面。以下是一些好处:</p> <ul><li><p>多维数据表示: 堆叠的数据结构能够更清晰地表示多维数据, 允许您将数据以更结构化的方式组织。这对于具有多个维度或特征的数据集非常有用, 例如时间序列数据、多组实验数据、多类别数据等。</p></li> <li><p>灵活性: 堆叠的数据结构提供了更多的分析和操作灵活性。您可以根据需要使用不同的索引级别来访问和分析数据, 而不需要重新组织原始数据。</p></li> <li><p>多维切片和筛选: 使用堆叠的数据结构, 您可以轻松地在多个索引级别上进行切片、筛选和子集选择。这使得在多维数据集中查找和提取特定数据更加方便。</p></li> <li><p>数据聚合: 堆叠的数据结构可以更轻松地进行数据聚合操作, 例如计算每个索引组合的平均值、总和或其他汇总统计量。</p></li> <li><p>数据可视化: 堆叠的数据结构有助于更容易创建多维数据的可视化图表。您可以根据不同的索引级别生成不同维度的图表, 以更好地理解数据。</p></li> <li><p>数据分析: 多维数据的探索性数据分析更加直观, 您可以更容易地查看不同维度之间的关系和趋势。</p></li></ul> <p>总的来说, 堆叠的数据结构提供了更多的数据处理和分析选项, 特别适用于需要处理多维数据或多维度数据的情况。它使数据更有组织性, 更易于理解和利用。</p> <h3 id="数据透视表"><a href="#数据透视表" class="header-anchor">#</a> 数据透视表</h3> <blockquote><p>&quot;pivot&quot; 一词在数据处理中通常用来表示在某种方式上重新排列数据, 以便将原始数据按照不同的轴重新组织和展示</p></blockquote> <p>数据透视表(Pivot Table)是数据分析和报表制作中常用的工具, 它可以用于对大量数据进行汇总和可视化展示。数据透视表通常用于以下情况:</p> <ul><li><p><strong>汇总数据</strong>: 数据透视表可以将大量的原始数据按照指定的方式进行分组和汇总, 以生成更简洁的摘要信息。这有助于从复杂的数据中提取有用的见解。</p></li> <li><p><strong>多维度分析</strong>: 数据透视表允许用户在多个维度上分析数据, 例如按时间、地区、产品类别等维度进行分组和分析。这有助于发现不同维度之间的关联和趋势。</p></li> <li><p><strong>可视化</strong>: 数据透视表通常以表格或交互式图形的形式呈现, 使数据更容易理解。用户可以根据需要自定义数据透视表的布局和可视化方式。</p></li> <li><p><strong>过滤和筛选</strong>: 数据透视表通常允许用户根据特定条件过滤和筛选数据, 以便进行更深入的分析。</p></li> <li><p><strong>汇总函数</strong>: 数据透视表支持各种汇总函数, 如求和、平均、最大值、最小值、中位数等, 以便计算和显示聚合数据。</p></li> <li><p><strong>快速报表生成</strong>: 数据透视表工具通常具有用户友好的界面, 可以通过拖放或选择字段来生成报表, 而无需编写复杂的代码。</p></li></ul> <p>Pandas 库中的 pivot_table 函数是一个常见的工具, 用于创建和操作数据透视表。数据透视表在数据分析、数据可视化和业务报表生成中非常有用, 因为它可以帮助用户更好地理解和解释数据。</p> <h3 id="groupby-和-pivot-table"><a href="#groupby-和-pivot-table" class="header-anchor">#</a> groupby 和 pivot_table</h3> <p><code>groupby</code> 和 <code>pivot</code>_<code>table</code> 是 <code>Pandas</code> 中用于数据重塑和聚合的两种不同方法。</p> <p><code>groupby</code>:</p> <ul><li><code>groupby</code> 用于将数据根据一个或多个列的值分组。
您可以对每个组应用聚合函数, 例如 <code>sum</code>, <code>mean</code>, <code>count</code>, 等。</li> <li><code>groupby</code> 通常用于生成汇总信息, 如计算每个组的总和、均值等。
结果是一个 <code>GroupBy</code> 对象, 您可以在其上应用聚合函数。</li></ul> <p>示例:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>grouped <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'category'</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> grouped<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>pivot_table</code>:</p> <ul><li><code>pivot_table</code> 用于将数据从长格式(long format)重塑为宽格式(wide format)。
它允许您将一个或多个列作为行和列索引, 然后填充这些单元格的值。</li> <li><code>pivot_table</code> 通常用于创建透视表, 将数据沿着不同的维度进行汇总。
结果是一个新的数据框, 其中行和列被重新组织以便进行更方便的分析。</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pivot_df <span class="token operator">=</span> df<span class="token punctuation">.</span>pivot_table<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token string">'date'</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'category'</span><span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token string">'value'</span><span class="token punctuation">,</span> aggfunc<span class="token operator">=</span><span class="token string">'sum'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>总结</strong>:</p> <ul><li>使用 <code>groupby</code> 当您希望按照某些列的值对数据进行分组, 并对每个组应用聚合操作。</li> <li>使用 <code>pivot</code>_<code>table</code> 当您希望将数据从长格式(例如时间序列数据)转换为宽格式, 以便进行透视分析或制作透视表。</li></ul> <p>这两种方法在不同情况下非常有用, 具体取决于您的数据分析需求。</p> <h3 id="堆叠的数据与宽格式-长格式"><a href="#堆叠的数据与宽格式-长格式" class="header-anchor">#</a> 堆叠的数据与宽格式, 长格式</h3> <p>堆叠的数据、宽格式和长格式是数据在数据分析领域中的不同表示方式, 它们之间存在关系, 通常用于不同的数据分析需求。</p> <p><strong>宽格式(Wide Format)</strong>:</p> <ul><li>宽格式数据通常以表格的形式表示, 其中每个变量(列)占据表格的一列, 每行表示一个观察或数据点。</li> <li>这种格式适合于一次性查看多个变量和进行某些类型的统计分析。</li> <li>宽格式数据对于简单的数据报表和可视化非常有用。</li></ul> <p><strong>长格式(Long Format)</strong>:</p> <ul><li>长格式数据通常具有多层索引, 其中每个观察都可以由多个索引级别来唯一标识。</li> <li>这种格式适合于包含多维数据或多维度数据的情况, 例如时间序列数据、多组实验数据或多类别数据。</li> <li>长格式数据通常使用 Pandas 的 MultiIndex(多层索引)或包含多个变量的列来表示。</li></ul> <p><strong>堆叠的数据(Stacked Data)</strong>:</p> <ul><li>堆叠的数据通常是长格式数据的一种表示方式, 其中数据以多层索引的形式存储, 使得每个数据点都可以由多个索引级别来唯一标识。</li> <li>这种格式通常用于多维数据或多维度数据的表示, 允许更灵活的分析和操作。</li> <li>堆叠数据通常在 Pandas 中使用 MultiIndex 的 DataFrame 或 Series 来表示。</li></ul> <p>**关系: **</p> <ul><li>堆叠的数据可以视为长格式数据的一种表示方式, 其中多层索引的使用允许更灵活地表示多个维度或多个特征。</li> <li>当需要在长格式和宽格式之间切换时, Pandas 提供了许多方法, 如 pivot、pivot_table、melt 等, 以帮助数据的转换和透视。</li></ul> <p>总之, 这些数据表示格式之间存在关系, 您可以根据您的数据和分析需求选择最适合的格式。通常, 长格式和堆叠的数据更适合多维数据, 而宽格式更适合简单的数据报表和可视化。</p> <h3 id="style"><a href="#style" class="header-anchor">#</a> style</h3> <p>style.apply 和 style.applymap 都是 Pandas 的样式功能中的方法, 用于在 DataFrame 的元素上应用样式。虽然它们的名称相似, 但它们的用法和适用范围略有不同。</p> <ol><li><code>style.applymap</code>:</li></ol> <p>适用范围: 用于 DataFrame 中的每个元素。
用法: 接受一个函数, 该函数将被应用于 DataFrame 的每个元素, 使你能够基于元素的值来自定义样式。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">style_function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 返回 CSS 样式字符串</span>
    <span class="token keyword">return</span> <span class="token string">'color: red'</span> <span class="token keyword">if</span> value <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'color: green'</span>

styled_df <span class="token operator">=</span> df<span class="token punctuation">.</span>style<span class="token punctuation">.</span>applymap<span class="token punctuation">(</span>style_function<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li><code>style.apply</code>:</li></ol> <p>适用范围: 用于按行或按列对 DataFrame 应用样式。
用法: 接受一个函数, 并指定轴(axis), 函数将按照指定的轴应用于 DataFrame。这允许你在整行或整列上根据一些聚合或条件来定义样式。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">style_function</span><span class="token punctuation">(</span>series<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 返回 CSS 样式字符串</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'color: red'</span> <span class="token keyword">if</span> val <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">'color: green'</span> <span class="token keyword">for</span> val <span class="token keyword">in</span> series<span class="token punctuation">]</span>

styled_df <span class="token operator">=</span> df<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>style_function<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 在列上应用样式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>总体而言, style.applymap 更适合在每个单独的元素上应用样式, 而 style.apply 更适合在整行或整列上应用样式。在选择使用哪个方法时, 取决于你想要的样式效果以及你希望在 DataFrame 的哪个级别上应用样式。</p> <h3 id="shift-和-rolling"><a href="#shift-和-rolling" class="header-anchor">#</a> shift 和 rolling</h3> <p>shift 和 rolling 是 pandas 中用于时间序列数据处理的两个常用函数, 它们分别用于对数据进行移动和滚动计算。</p> <ol><li><p>shift:
作用:  shift 主要用于将数据向前或向后移动指定数量的步长。</p></li> <li><p>rolling:
作用:  rolling 主要用于执行滚动计算, 例如计算滚动均值或滚动总和。</p></li></ol> <h2 id="链接"><a href="#链接" class="header-anchor">#</a> 链接</h2> <ul><li><a href="https://pandas.pydata.org/" target="_blank" rel="noopener noreferrer">pandas<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>[reference]https://pandas.pydata.org/docs/reference/</li></ul></li> <li><a href="https://www.w3resource.com/pandas/dataframe/dataframe.php" target="_blank" rel="noopener noreferrer">w3c-Pandas: DataFrame<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/blogPages/tags/?tag=pandas" title="标签">#pandas</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/10/12, 17:10:18</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blogPages/pages/859666/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">py_snip</div></a> <a href="/blogPages/pages/9e17a2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">numpy</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blogPages/pages/859666/" class="prev">py_snip</a></span> <span class="next"><a href="/blogPages/pages/9e17a2/">numpy</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blogPages/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blogPages/pages/9729d0/"><div>
            mac
            <!----></div></a> <span class="date">10-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/blogPages/pages/ae37cb/"><div>
            xargs
            <!----></div></a> <span class="date">10-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/blogPages/pages/f3e095/"><div>
            brew
            <!----></div></a> <span class="date">10-18</span></dt></dl> <dl><dd></dd> <dt><a href="/blogPages/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:jackdoson2011@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/jacky1234" title="Github" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=317363436" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2024
    <span>Jacky | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/blogPages/assets/js/app.7e06e929.js" defer></script><script src="/blogPages/assets/js/2.ce95ee6e.js" defer></script><script src="/blogPages/assets/js/215.be04d383.js" defer></script><script src="/blogPages/assets/js/6.69b19f48.js" defer></script>
  </body>
</html>
